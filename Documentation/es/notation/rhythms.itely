@c -*- coding: utf-8; mode: texinfo; documentlanguage: es -*-
@ignore
    Translation of GIT committish: 8d26005d0b783e546de362b96fb1b00540875064

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  For details, see the Contributors'
    Guide, node Updating translation committishes..
@end ignore

@c \version "2.19.2"

@node Duraciones
@section Duraciones
@translationof Rhythms

@lilypondfile[quote]{rhythms-headword.ly}

Esta sección trata de los ritmos, los silencios, las duraciones, las
barras y los compases.

@menu
* Escritura de las duraciones (valores rítmicos)::
* Escritura de silencios::
* Impresión de las duraciones::
* Barras::
* Compases::
* Asuntos rítmicos especiales::
@end menu


@node Escritura de las duraciones (valores rítmicos)
@subsection Escritura de las duraciones (valores rítmicos)
@translationof Writing rhythms

@menu
* Duración de las notas::
* Grupos especiales::
* Escalar las duraciones::
* Ligaduras de unión::
@end menu

@node Duración de las notas
@unnumberedsubsubsec Duración de las notas
@translationof Durations

@cindex duración de las notas
@cindex notas, duración de
@cindex longitud de las notas
@cindex notas, longitud de

@funindex \longa
@funindex longa
@funindex \breve
@funindex breve
@funindex \maxima
@funindex maxima

Las duraciones se designan mediante números y puntos. Las duraciones
se introducen como sus valores recíprocos respecto de la redonda.  Por
ejemplo, una negra se escribe usando un @code{4} (puesto que es 1/4 de
redonda), mientras que una blanca se escribe con un @code{2} (por ser
1/2 de redonda).  Para notas mayores de la redonda se deben usar las
instrucciones @code{\longa} (que es una breve doble) y
@code{\breve}. Se pueden especificar duraciones tan cortas como la
garrapatea (con el número 128).  Son posibles valores más cortos, pero
sólo como notas unidas por una barra.

@c Two 64th notes are needed to obtain beams
@lilypond[quote,verbatim,relative=2]
\time 8/1
c\longa c\breve c1 c2
c4 c8 c16 c32 c64 c128 c128
@end lilypond

Aquí se pueden ver las mismas duraciones con el barrado automático
desactivado.

@c not strictly "writing rhythms"; more of a "displaying" thing,
@c but it's ok here.  -gp
@lilypond[quote,verbatim,relative=2]
\time 8/1
\autoBeamOff
c\longa c\breve c1 c2
c4 c8 c16 c32 c64 c128 c128
@end lilypond

Se puede escribir una nota con la duración de una cuádruple breve
mediante @code{\maxima}, pero esto está contemplado solamente dentro
de la notación musical antigua.  Para ver más detalles, consulte
@ref{Notación antigua}.

@cindex duración predeterminada
@cindex predeterminada, duración de la nota
@cindex nota, duración predeterminada

Si la duración se omite, su valor será el de la duración de la nota
anterior.  Por omisión, el valor de la primera nota es el de una
negra.

@lilypond[quote,verbatim,relative=2]
a a a2 a a4 a a1 a
@end lilypond

@cindex notas, con puntillo
@cindex puntillo, notas con
@cindex notas, con doble puntillo
@cindex doble puntillo, notas con

@funindex .

Para obtener duraciones de notas con puntillo, escriba un punto
(@code{.}) después del número.  Las notas con doble puntillo se
especifican escribiendo dos puntos, y así sucesivamente.

@lilypond[quote,verbatim,relative=2]
a4 b c4. b8 a4. b4.. c8.
@end lilypond

Ciertas duraciones no se pueden representar sólo con duraciones
binarias y puntillos; la única forma de representarlas es ligando dos
o más notas.  Para ver más detalles, consulte @ref{Ligaduras de unión}.

Para ver de qué manera se pueden especificar las duraciones de las
sílabas de la letra y cómo alinear la letra a las notas, consulte
@ref{Música vocal}.

Opcionalmente se pueden espaciar las notas de forma estrictamente
proporcional a sus duraciones.  Para ver más detalles sobre este y
otros ajustes que controlan la notación proporcional, consulte
@ref{Notación proporcional}.

@funindex \dotsUp
@funindex dotsUp
@funindex \dotsDown
@funindex dotsDown
@funindex \dotsNeutral
@funindex dotsNeutral

Normalmente los puntillos se desplazan hacia arriba para evitar las
líneas del pentagrama, excepto en situaciones de polifonía. Se pueden
situar los puntillos manualmente encima o debajo de las líneas de la
pauta; véase @ref{Dirección y posición}.

@predefined
@code{\autoBeamOn},
@code{\autoBeamOff},
@code{\dotsUp},
@code{\dotsDown},
@code{\dotsNeutral}.
@endpredefined


@snippets

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{alternative-breve-notes.ly}

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{changing-the-number-of-augmentation-dots-per-note.ly}

@seealso
Glosario musical:
@rglos{breve},
@rglos{longa},
@rglos{maxima},
@rglos{note value},
@rglos{Duration names notes and rests}.

Referencia de la notación:
@ref{Barras automáticas},
@ref{Ligaduras de unión},
@ref{Plicas},
@ref{Escritura de las duraciones (valores rítmicos)},
@ref{Escritura de silencios},
@ref{Música vocal},
@ref{Notación antigua},
@ref{Notación proporcional}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{Dots},
@rinternals{DotColumn}.

@knownissues
@c Deliberately duplicated in Durations and Rests.  -gp
No existe un límite fundamental para las duraciones de los silencios
(tanto para el más largo como para el más corto), pero el numero de
glifos es limitado: sólo se pueden imprimir desde el silencio de
garrapatea (128) hasta el de máxima (8 redondas).


@node Grupos especiales
@unnumberedsubsubsec Grupos especiales
@translationof Tuplets

@cindex grupos especiales
@cindex tresillos

@funindex \tuplet
@funindex tuplet

Los grupos especiales se obtienen a partir de una expresión
musical con la instrucción @code{\tuplet}, multiplicando la
rapidez de la expresión musical por una fracción:

@example
\tuplet @var{fracción} @{ @var{música} @}
@end example

@noindent
El nomerador de la fracción se imprime encima o debajo de las
notas, opcionalmente con un corchete.  El grupo especial más común
es el tresillo, en el que 3@tie{}notas tienen el valor que
normalmente tienen@tie{}2:

@lilypond[quote,verbatim,relative=2]
a2 \tuplet 3/2 { b4 b b }
c4 c \tuplet 3/2 { b4 a g }
@end lilypond

@cindex agrupación de grupes especiales
@noindent
Si se están escribiendo pasajes con muchos grupos de valoración
especial, resulta fastidioso tener que escribir una instrucción
@code{\tuplet} distinta para cada grupo.  Es posible especificar
la duración de un conjunto de grupos directamente antes de la
música para que así se agrupen automáticamente:

@lilypond[quote,verbatim,relative=2]
g2 r8 \tuplet 3/2 8 { cis16 d e e f g g f e }
@end lilypond

@cindex grupos de valoración especial, colocación del corchete

@funindex \tupletUp
@funindex tupletUp
@funindex \tupletDown
@funindex tupletDown
@funindex \tupletNeutral
@funindex tupletNeutral

Se pueden colocar manualmente los corchetes de tresillo encima o
debajo de la pauta; véase @ref{Dirección y posición}.

Los grupos pueden anidarse unos dentro de otros:

@lilypond[quote,verbatim,relative=2]
\autoBeamOff
c4 \tuplet 5/4 { f8 e f \tuplet 3/2 { e[ f g] } } f4
@end lilypond

La modificación de los grupos especiales anidados que comienzan en el
mismo instante musical se debe hacer con @code{\tweak}.

Para modificar la duración de las notas sin imprimir un corchete de
grupo especial, véase @ref{Escalar las duraciones}.

@predefined
@code{\tupletUp},
@code{\tupletDown},
@code{\tupletNeutral}.
@endpredefined

@snippets
@cindex grupos especiales, formato de
@cindex tresillos, formato de

@funindex tupletNumberFormatFunction
@funindex tupletSpannerDuration

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{entering-several-tuplets-using-only-one--times-command.ly}

@cindex grupos de valoración especial, modificación del número

@funindex TupletNumber

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{changing-the-tuplet-number.ly}

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{non-default-tuplet-numbers.ly}

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{controlling-tuplet-bracket-visibility.ly}

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{permitting-line-breaks-within-beamed-tuplets.ly}

@seealso
Glosario musical:
@rglos{triplet},
@rglos{tuplet},
@rglos{polymetric}.

Manual de aprendizaje:
@rlearning{Métodos de trucaje}.

Referencia de la notación:
@ref{Gestión del tiempo},
@ref{Escalar las duraciones},
@ref{La instrucción tweak},
@ref{Notación polimétrica}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{TupletBracket},
@rinternals{TupletNumber},
@rinternals{TimeScaledMusic}.

@cindex adorno, notas de, dentro de corchetes de grupo especial

@knownissues
Las notas de adorno se pueden escribir dentro de los corchetes de
grupo especial, @emph{excepto} cuando un pentagrama comienza por una
nota de adorno seguida de un grupo de valoración especial.  En este
caso concreto, se debe poner la nota de adorno antes de la instrucción
@code{\tuplet} para evitar errores.

@cindex indicaciones de tempo dentro de corchetes de grupo especial

Cuando se utiliza un grupo de valoración especial al comienzo de una
pieza con una indicación de @code{\tempo}, la música se debe escribir
explícitamente dentro de un bloque @code{\new Voice}, tal y como se
explica en @rlearning{Las voces contienen música}.


@node Escalar las duraciones
@unnumberedsubsubsec Escalar las duraciones
@translationof Scaling durations

@cindex escalar las duraciones
@cindex duraciones, escalado de

La duración de las figuras, silencios o acordes se puede multiplicar
por un factor @code{N/M} añadiendo @code{*N/M} (o @code{*N} si @code{M} es
1) a la duración.  Esto no afectará a la apariencia de las notas o
silencios que se producen, pero la duración alterada se usará para
calcular la posición dentro del compás y para establecer la duración
en la salida MIDI.  Los factores de multiplicación se pueden combinar
en la forma @code{*L*M/N}.  Los factores son parte de la duración: si
no especificamos una duración para las notas siguientes, la duración
por omisión que se toma de la nota anterior incluirá cualquier factor
de escala que se haya aplicado.

En el siguiente ejemplo las tres primeras notas duran exactamente dos
partes, pero no se imprime ningún corchete de tresillo.

@lilypond[quote,relative=2,verbatim]
\time 2/4
% Alter durations to triplets
a4*2/3 gis a
% Normal durations
a4 a
% Double the duration of chord
<a d>4*2
% Duration of quarter, appears like sixteenth
b16*4 c4
@end lilypond

La duración de los silencios espaciadores también se puede modificar
mediante un multiplicador.  Esto es útil para saltar muchos compases,
como por ejemplo @code{s1*23}.

@cindex compresión de música
@cindex expansión de música

@funindex \scaleDurations
@funindex scaleDurations

De la misma forma, se pueden comprimir por una fracción trozos de
música más largos, como si cada nota, acorde o silencio tuviera la
fracción como multiplicador.  Esto dejará intacta la apariencia de la
@emph{música}, pero la duración interna de las notas se multiplicará
por la fracción @emph{numerador}/@emph{denominador}.
He aquí un ejemplo que muestra cómo
se puede comprimir y expandir la música:

@lilypond[quote,relative=2,verbatim]
\time 2/4
% Normal durations
<c a>4 c8 a
% Scale music by *2/3
\scaleDurations 2/3 {
  <c a f>4. c8 a f
}
% Scale music by *2
\scaleDurations 2/1 {
  <c' a>4 c8 b
}
@end lilypond

Una aplicación de esta instrucción se encuentra en la notación
polimétrica, véase @ref{Notación polimétrica}.

@seealso
Referencia de la notación:
@ref{Grupos especiales},
@ref{Silencios invisibles},
@ref{Notación polimétrica}.

Fragmentos de código:
@rlsr{Rhythms}.

@knownissues
El cálculo de la posición dentro de un compás sdebe tener en
cuenta todos los factores de escalado que se han aplicado a las
notas dentro de ese compás, y cualquier acarreo fraccionado desde
los compases anteriores.  Este cálculo se efectúa utilizando
números racionales.  Si un numerador o denominador intermedio en
dicho proceso de cálculo sobrepasa la cantidad de 2^30, la
ejecución y el tipografiado se detendrán en ese punto sin indicar
ningún error.

@node Ligaduras de unión
@unnumberedsubsubsec Ligaduras de unión
@translationof Ties

@cindex ligadura de unión

@funindex ~

Una ligadura de unión conecta dos notas adyacentes de la misma altura.  La ligadura
en efecto extiende la longitud de una nota.

@warning{No deben confundirse las ligaduras de unión con las
@emph{ligaduras de expresión}, que indican articulación, ni con las
@emph{ligaduras de fraseo}, que indican el fraseo musical.  Una
ligadura de unión es tan sólo una manera de extender la duración de
una nota, algo parecido a lo que hace el puntillo.}

Se introduce una ligadura de unión escribiendo el símbolo de la
tilde curva (@code{~}) después de la primera de cada pareja de
notas que se quieren unir.  Esto indica que la nota se une a la
siguiente, que debe tener la misma altura.

@lilypond[quote,verbatim,relative=2]
a2~ 4~ 16 r r8
@end lilypond

Se usan ligaduras de unión bien cuando la nota atraviesa la barra de
compás o bien cuando no se pueden usar puntillos para denotar el
ritmo.  También se deben usar ligaduras cuando las notas atraviesan
subdivisiones del compás de mayor duración:

@c KEEP LY
@lilypond[verbatim,quote]
\relative c' {
  r8^"sí" c~ 2 r4 |
  r8^"no" c2~ 8 r4
}
@end lilypond

Si necesitamos ligar muchas notas a través de las líneas divisorias,
nos podría resultar más fácil utilizar la división automática de las
notas, véase @ref{División automática de las notas}.  Este mecanismo divide
automáticamente las notas largas y las liga a través de las barras de
compás.

@cindex ligaduras y acordes
@cindex acordes y ligaduras

Cuando se aplica una ligadura de unión a un acorde, se conectan todas
las cabezas de las notas cuyas alturas coinciden.  Si no coincide
ningún par de cabezas, no se crea ninguna ligadura.  Los acordes se
pueden ligar parcialmente colocando las ligaduras dentro del acorde.

@lilypond[quote,verbatim,relative=1]
<c e g>~ <c e g c>
<c~ e g~ b> <c e g b>
@end lilypond

@cindex repetición, ligaduras de unión en
@cindex ligaduras de unión, repeticiones y
@cindex primera y segunda vez, corchetes y ligaduras en
@cindex ligaduras de unión y corchetes de primera y segunda vez

@funindex \repeatTie
@funindex repeatTie

Cuando la segunda vez de una repetición comienza con una nota ligada,
es necesario especificar la ligadura repetida como sigue:

@lilypond[quote,relative=2,verbatim]
\repeat volta 2 { c g <c e>2~ }
\alternative {
  % First alternative: following note is tied normally
  { <c e>2. r4 }
  % Second alternative: following note has a repeated tie
  { <c e>2\repeatTie d4 c } }
@end lilypond

@cindex laissez vibrer
@cindex ligaduras laissez vibrer

@funindex \laissezVibrer
@funindex laissezVibrer

Las ligaduras @notation{L.v.} (@notation{laissez vibrer}, dejar
vibrar) indican que las notas no se deben apagar al final.  Se usan en
la notación para piano, arpa y otros instrumentos de cuerda y
percusión.  Se pueden introducir de la siguiente manera:

@lilypond[quote,verbatim,relative=1]
<c f g>1\laissezVibrer
@end lilypond

@cindex ligaduras, colocación

@funindex \tieUp
@funindex tieUp
@funindex \tieDown
@funindex tieDown
@funindex \tieNeutral
@funindex tieNeutral

Es posible hacer manualmente que las ligaduras de unión se curven
hacia arriba o hacia abajo; véase @ref{Dirección y posición}.

@cindex ligaduras, apariencia
@cindex ligaduras de puntos
@cindex ligaduras discontinuas
@cindex discontinuas, ligaduras
@cindex puntos, ligaduras de

@funindex \tieDotted
@funindex tieDotted
@funindex \tieDashed
@funindex tieDashed
@funindex \tieSolid
@funindex tieSolid

Se puede hacer que las ligaduras de expresión sean discontinuas,
punteadas o una combinación de continuas y discontinuas.

@lilypond[quote, verbatim, relative=1]
\tieDotted
c2~ 2
\tieDashed
c2~ 2
\tieHalfDashed
c2~ 2
\tieHalfSolid
c2~ 2
\tieSolid
c2~ 2
@end lilypond

Se pueden especificar patrones de discontinuidad personalizados:

@lilypond[quote, verbatim, relative=1]
\tieDashPattern #0.3 #0.75
c2~ 2
\tieDashPattern #0.7 #1.5
c2~ 2
\tieSolid
c2~ 2
@end lilypond

Las definiciones de patrones de discontinuidad para las ligaduras de
unión tienen la misma estructura que las definiciones de patrones de
discontinuidad para las ligaduras de expresión.  Para ver más
información acerca de los patrones de discontinuidad complejos,
consulte los fragmentos de código bajo @ref{Ligaduras de expresión}.

Sobreescriba las propiedades de disposición @var{whiteout} y
@var{layer} para las ligaduras de unión que colisionen con otros
objetos del pentagrama.

@lilypond[verbatim,quote,ragged-right,relative=2]
\override Tie.layer = #-2
\override Staff.TimeSignature.layer = #-1
\override Staff.KeySignature.layer = #-1
\override Staff.TimeSignature.whiteout = ##t
\override Staff.KeySignature.whiteout = ##t
b2 b~
\time 3/4
\key a \major
b r4
@end lilypond

@predefined
@code{\tieUp},
@code{\tieDown},
@code{\tieNeutral},
@code{\tieDotted},
@code{\tieDashed},
@code{\tieDashPattern},
@code{\tieHalfDashed},
@code{\tieHalfSolid},
@code{\tieSolid}.
@endpredefined

@snippets
@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{using-ties-with-arpeggios.ly}

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{engraving-ties-manually.ly}

@seealso
Glosario musical:
@rglos{tie},
@rglos{laissez vibrer}.

Referencia de la notación:
@ref{Ligaduras de expresión},
@ref{División automática de las notas}.

Fragmentos de código:
@rlsr{slurs},
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{LaissezVibrerTie},
@rinternals{LaissezVibrerTieColumn},
@rinternals{TieColumn},
@rinternals{Tie}.

@knownissues
Un cambio de pentagrama cuando hay una ligadura activa no producirá
una ligadura inclinada.

Los cambios de clave o de octava durante una ligadura de unión no
están bien definidos realmente.  En estos casos puede ser preferible
una ligadura de expresión.


@node Escritura de silencios
@subsection Escritura de silencios
@translationof Writing rests

Los silencios se escriben como parte de la música dentro de las
expresiones musicales.

@menu
* Silencios::
* Silencios invisibles::
* Silencios de compás completo::
@end menu

@node Silencios
@unnumberedsubsubsec Silencios
@translationof Rests

@cindex silencio
@cindex silencios, indicar duraciones
@cindex maxima, silencio de
@cindex longa, silencio de
@cindex breve, silencio de

@funindex \rest
@funindex rest
@funindex r
@funindex \maxima
@funindex maxima
@funindex \longa
@funindex longa
@funindex \breve
@funindex breve

Los silencios se introducen como notas con el nombre @code{r}.  Las
duraciones mayores que la redonda utilizan las instrucciones
predefinidas que se muestran aquí:

@c \time 16/1 is used to avoid spurious bar lines
@c and long tracts of empty measures
@lilypond[quote,verbatim,relative=2]
\new Staff {
  % These two lines are just to prettify this example
  \time 16/1
  \omit Staff.TimeSignature
  % Print a maxima rest, equal to four breves
  r\maxima
  % Print a longa rest, equal to two breves
  r\longa
  % Print a breve rest
  r\breve
  r1 r2 r4 r8 r16 r32 r64 r128
}
@end lilypond

@cindex silencios multicompás
@cindex silencios de compás completo

Los silencios de un compás, centrados en medio del compás, se deben
hacer con silencios multicompás.  Se pueden usar para un solo compás
así como para muchos compases, y se tratan en @ref{Silencios de compás completo}.

@cindex silencio, especificar la posición vertical

Para especificar explícitamente la posición vertical de un silencio,
escriba una nota seguida de @code{\rest}.  Se colocará un silencio en
la posición en que debería aparecer la nota.  Esto posibilita la
aplicación manual precisa de formato a la música polifónica, ya que el
formateador automático de colisiones de silencios no mueve estos
silencios.

@lilypond[quote,verbatim,relative=2]
a4\rest d4\rest
@end lilypond

@snippets
@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{rest-styles.ly}

@seealso
Glosario musical:
@rglos{breve},
@rglos{longa},
@rglos{maxima}.

Referencia de la notación:
@ref{Silencios de compás completo}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{Rest}.

@knownissues
@c Deliberately duplicated in Durations and Rests.  -gp
No existe un límite fundamental respecto de las duraciones de los
silencios (tanto para el más corto como para el más largo), pero el
número de glifos es limitado: hay silencios desde la garrapatea (128)
hasta la máxima (8 redondas).


@node Silencios invisibles
@unnumberedsubsubsec Silencios invisibles
@translationof Invisible rests

@cindex desplazamiento
@cindex silencio invisible
@cindex invisible, silencio
@cindex nota de espaciado
@cindex silencio de separación

@funindex s
@funindex \skip
@funindex skip

Un silencio invisible (también conocido como @q{skip} o
desplazamiento) se puede introducir como una nota con el
nombre@tie{}@code{s}:

@lilypond[verbatim,quote,relative=2]
c4 c s c
s2 c
@end lilypond

@cindex letra, desplazamiento de

Los silencios de separación sólo están disponible en el modo de notas
y en el modo de acordes.  En otras situaciones, por ejemplo, cuando se
introduce la letra, se usa la instrucción @code{\skip} para producir
un desplazamiento de una cierta magnitud temporal.  @code{\skip}
requiere una duración explícita, pero se ignora si las sílabas de la
letra toman sus duraciones de las notas de una melodía asociada, a
través de @code{\addlyrics} o de @code{\lyricsto}.

@lilypond[quote,verbatim,relative=2]
<<
  {
    a2 \skip2 a2 a2
  }
  \new Lyrics {
    \lyricmode {
      foo2 \skip 1 bla2
    }
  }
>>
@end lilypond

Dado que @code{\skip} es una instrucción, no afecta a las duraciones
por omisión de las notas siguientes, a diferencia de@tie{}@code{s}.

@lilypond[quote,verbatim,relative=2]
<<
  {
    \repeat unfold 8 { a4 }
  }
  {
    a4 \skip 2 a |
    s2 a
  }
>>
@end lilypond

Un silencio de separación produce implícitamente contextos
@code{Staff} y @code{Voice} si no existe ninguno, igual que las notas
y los silencios normales:

@lilypond[quote,verbatim,relative=2]
s1 s s
@end lilypond

@code{\skip} tan sólo desplaza un tiempo musical; no produce ninguna
salida, de ninguna clase.

@lilypond[quote,verbatim,relative=2]
% This is valid input, but does nothing
\skip 1 \skip1 \skip 1
@end lilypond

@seealso
Manual de aprendizaje:
@rlearning{Visibilidad y color de los objetos}.

Referencia de la notación:
@ref{Notas ocultas},
@ref{Visibilidad de los objetos}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{SkipMusic}.


@node Silencios de compás completo
@unnumberedsubsubsec Silencios de compás completo
@translationof Full measure rests

@cindex multicompás, silencios
@cindex compás completo, silencios de
@cindex silencios multicompás
@cindex silencios de compás completo
@cindex redonda, silencios de, para un compás completo
@cindex silencios de redonda para un compás completo

@funindex R

Los silencios de uno o más compases completos se introducen como notas
con el nombre @code{R} en mayúscula:

@lilypond[quote,verbatim,relative=2]
% Rest measures contracted to single measure
\compressFullBarRests
R1*4
R1*24
R1*4
b2^"Tutti" b4 a4
@end lilypond

La duración de los silencios de compás completo es idéntica a la
notación de la duración que se usa para las notas.  La duración de un
silencio multi-compás debe ser siempre un número entero de compases,
por lo que con frecuencia han de utilizarse puntillos o fracciones:

@lilypond[quote,verbatim,relative=2]
\compressFullBarRests
\time 2/4
R1 | R2 |
\time 3/4
R2. | R2.*2 |
\time 13/8
R1*13/8 | R1*13/8*12 |
\time 10/8
R4*5*4 |
@end lilypond

Un silencio de un compás completo se imprime como un silencio de
redonda o de breve, centrado en el compás, según el tipo de compás
vigente.

@lilypond[quote,verbatim,relative=2]
\time 4/4
R1 |
\time 6/4
R1*3/2 |
\time 8/4
R1*2 |
@end lilypond

@cindex multicompás, silencios, expansión de
@cindex multicompás, silencios, contracción de

@funindex \expandFullBarRests
@funindex expandFullBarRests
@funindex \compressFullBarRests
@funindex compressFullBarRests

De forma predeterminada un silencio multicompás se expande en la
partitura impresa para mostrar explícitamente todos los compases de
silencio.  De forma alternativa, un silencio multicompás se puede
presentar como un solo compás que contiene un símbolo de silencio
multicompás, con el número de compases impreso encima del compás:

@lilypond[quote,verbatim,relative=2]
% Default behavior
\time 3/4 r2. | R2.*2 |
\time 2/4 R2 |
\time 4/4
% Rest measures contracted to single measure
\compressFullBarRests
r1 | R1*17 | R1*4 |
% Rest measures expanded
\expandFullBarRests
\time 3/4
R2.*2 |
@end lilypond

@cindex texto sobre un silencio multicompás
@cindex multicompás, silencio, adjuntar texto
@cindex inscripción sobre un silencio multicompás
@cindex multicompás, silencios, inscripción en
@cindex calderón sobre un silencio multicompás
@cindex multicompás, silencio, aplicar un calderón a
@cindex marcado sobre silencios multicompás
@cindex multicompás, silencio, con marcados

@funindex \fermataMarkup
@funindex fermataMarkup
@funindex MultiMeasureRestText

Se pueden añadir elementos de marcado a los silencios multicompás.  Se
proporciona la instrucción predefinida @code{\fermataMarkup} para
añadir calderones.

@lilypond[quote,verbatim,relative=2]
\compressFullBarRests
\time 3/4
R2.*10^\markup { \italic "ad lib." }
R2.^\fermataMarkup
@end lilypond

@warning{Los elementos de marcado que se añaden a un silencio
multicompás son objetos del tipo @code{MultiMeasureRestText}, no
@code{TextScript}.  Las sobreescrituras de propiedades deben ir
dirigidas hacia el objeto correcto, o se ignorarán.  Véase el ejemplo
siguiente:}

@lilypond[quote,verbatim,relative=2]
% This fails, as the wrong object name is specified
\override TextScript.padding = #5
R1^"wrong"
% This is the correct object name to be specified
\override MultiMeasureRestText.padding = #5
R1^"right"
@end lilypond

Cuando un silencio multicompás sigue inmediatamente al establecimiento
de un compás parcial con @code{\partial}, es posible que no se emitan
las advertencias correspondientes de comprobación de compás.

@funindex \textLengthOn
@funindex textLengthOn
@funindex \textLengthOff
@funindex textLengthOff
@funindex \fermataMarkup
@funindex fermataMarkup
@funindex \compressFullBarRests
@funindex compressFullBarRests
@funindex \expandFullBarRests
@funindex expandFullBarRests

@predefined
@code{\textLengthOn},
@code{\textLengthOff},
@code{\fermataMarkup},
@code{\compressFullBarRests},
@code{\expandFullBarRests}.
@endpredefined

@snippets
@cindex eclesiásticos, silencios
@cindex silencios eclesiásticos
@cindex kirchenpausen

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{changing-form-of-multi-measure-rests.ly}

@cindex multicompás, posicionamiento de los silencios
@cindex colocación de los silencios multicompás

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{positioning-multi-measure-rests.ly}

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{multi-measure-rest-markup.ly}

@seealso
Glosario musical:
@rglos{multi-measure rest}.

Referencia de la notación:
@ref{Duraciones},
@ref{Texto},
@ref{Formatear el texto},
@ref{Guiones de texto}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{MultiMeasureRest},
@rinternals{MultiMeasureRestNumber},
@rinternals{MultiMeasureRestText}.

@cindex digitaciones y silencios multicompás
@cindex multicompás, silencios, digitaciones y

@knownissues
En las digitaciones encima de silencios multicompás
(p. ej., @code{R1*10-4}), la cifra de la digitación
puede chocar con el número del compás.

@cindex condensar silencios
@cindex silencio normal, condensar

No hay ninguna forma de condensar automáticamente muchos silencios en
un solo silencio multicompás.

@cindex silencio, colisiones de

Los silencios multicompás no toman parte en las colisiones de
silencios.


@node Impresión de las duraciones
@subsection Impresión de las duraciones
@translationof Displaying rhythms

@menu
* Indicación de compás::
* Indicaciones metronómicas::
* Anacrusas::
* Música sin compasear::
* Notación polimétrica::
* División automática de las notas::
* Mostrar los ritmos de la melodía::
@end menu

@node Indicación de compás
@unnumberedsubsubsec Indicación de compás
@translationof Time signature

@cindex Indicación de compás
@cindex medida

@funindex \time
@funindex time

La indicación de compás se establece como sigue:

@lilypond[quote,verbatim,relative=2]
\time 2/4 c2
\time 3/4 c2.
@end lilypond

@cindex compás, visibilidad de la indicación de

La indicación de compás se imprime al comienzo de una pieza y siempre
que hay un cambio de compás.  Si se produce un cambio al final de una
línea, se imprime una indicación de advertencia en dicho lugar.  Se
puede modificar este comportamiento predeterminado, véase
@ref{Visibilidad de los objetos}.

@lilypond[quote,verbatim,relative=2]
\time 2/4
c2 c
\break
c c
\break
\time 4/4
c c c c
@end lilypond

@cindex compás, estilo de la indicación de
@cindex metro, estilo de

@funindex \numericTimeSignature
@funindex numericTimeSignature
@funindex \defaultTimeSignature
@funindex defaultTimeSignature

El símbolo de compás que se usa en 2/2 y 4/4 se puede cambiar a un
estilo numérico:

@lilypond[quote,verbatim,relative=2]
% Default style
\time 4/4 c1
\time 2/2 c1
% Change to numeric style
\numericTimeSignature
\time 4/4 c1
\time 2/2 c1
% Revert to default style
\defaultTimeSignature
\time 4/4 c1
\time 2/2 c1
@end lilypond

Las indicaciones de compás de la música mensural se tratan en
@ref{Indicaciones de compás de la música mensural}.

@cindex compás, indicación de, ajustes predeterminados
@cindex autobarrado, propiedades para indicaciones de compás
@cindex barrado, propiedades predefinidas para el compás
@funindex \overrideTimeSignatureSettings

Además de ajustar la indicación de compás que se imprime, la
instrucción @code{\time} establece también los valores de las
propiedades basadas en el tipo de compás @code{baseMoment},
@code{beatStructure} y @code{beamExceptions}.  Los valores
predefinidos de estas propiedades están en
@file{scm/time-signature-settings.scm}.

El valor predeterminado de @code{beatStructure} puede sobreescribirse
dentro de la propia instrucción @code{\time} escribiéndolo como primer
argumento opcional:

@lilypond[quote,verbatim]
\score {
  \new Staff {
    \relative c' {
      \time #'(2 2 3) 7/8
      \repeat unfold 7 { c8 } |
      \time #'(3 2 2) 7/8
      \repeat unfold 7 { c8 } |
    }
  }
}
@end lilypond

De forma alternativa, los valores predeterminados de todoas estas
variables basadas en la indicación de compás, incluidas
@code{baseMoment} y @code{beamExceptions}, se pueden establecer
juntas.  Los valores se pueden fijar independientemente para varios
tipos de compás distintos.  Los nuevos valores tienen efecto cuando se
ejecuta una instrucción @code{\time} posterior con el mismo valor del
tipo de compás:

@lilypond[quote,verbatim]
\score {
  \new Staff {
    \relative c' {
      \overrideTimeSignatureSettings
        4/4        % timeSignatureFraction
        1/4        % baseMomentFraction
        #'(3 1)    % beatStructure
        #'()       % beamExceptions
      \time 4/4
      \repeat unfold 8 { c8 } |
    }
  }
}
@end lilypond

@code{\overrideTimeSignatureSettings} toma cuatro argumentos:

@enumerate

@item
@code{@var{timeSignatureFraction}}, una fracción que describe
el tipo de compás al que se aplican estos valores.

@item
@code{@var{baseMomentFraction}}, una fracción que contiene el
numerador y denominador de la unidad de medida básica de ese tipo de
compás.

@item
@code{@var{beatStructure}}, una lista de Scheme que indica la
estructura de los pulsos del compás, en unidades del momento base.

@item
@code{@var{beamExceptions}}, una lista-A que contiene cualesquiera
reglas de barrado para el tipo de compás que vayan más allá de
terminar en cada pulso, como se describe en @ref{Establecer el
comportamiento de las barras automáticas}.
@end enumerate



@cindex compás, propiedades, restaurar los valores predeterminados
@cindex restaurar las propiedades predeterminadas del tipo de compás
@funindex \revertTimeSignatureSettings

Los valores modificados de las propiedades predeterminadas del tipo de
compás se pueden restaurar a los valores originales:

@lilypond[quote,verbatim]
\score{
  \relative c' {
    \repeat unfold 8 { c8 } |
    \overrideTimeSignatureSettings
      4/4        % timeSignatureFraction
      1/4        % baseMomentFraction
      #'(3 1)    % beatStructure
      #'()       % beamExceptions
    \time 4/4
    \repeat unfold 8 { c8 } |
    \revertTimeSignatureSettings 4/4
    \time 4/4
    \repeat unfold 8 { c8 } |
  }
}
@end lilypond

Se pueden establecer diferentes valores de las propiedades
predeterminadas del tipo de compás para los distintos pentagramas
moviendo el @code{Timing_translator} y el
@code{Default_bar_line_engraver} del contexto @code{Score} al contexto
@code{Staff}.

@lilypond[quote, verbatim]
\score {
  \new StaffGroup <<
     \new Staff {
        \overrideTimeSignatureSettings
          4/4        % timeSignatureFraction
          1/4        % baseMomentFraction
          #'(3 1)    % beatStructure
          #'()       % beamExceptions
        \time 4/4
        \repeat unfold 8 {c''8}
     }
     \new Staff {
        \overrideTimeSignatureSettings
          4/4        % timeSignatureFraction
          1/4        % baseMomentFraction
          #'(1 3)    % beatStructure
          #'()       % beamExceptions
        \time 4/4
        \repeat unfold 8 {c''8}
     }
  >>
  \layout {
    \context {
      \Score
      \remove "Timing_translator"
      \remove "Default_bar_line_engraver"
    }
    \context {
      \Staff
      \consists "Timing_translator"
      \consists "Default_bar_line_engraver"
    }
  }
}
@end lilypond

Otro método para cambiar estas variables relacionadas con el tipo de
compás, que evita la reimpresión de la indicación de compás en el
momento del cambio, se muestra en
@ref{Establecer el comportamiento de las barras automáticas}.

@predefined
@code{\numericTimeSignature},
@code{\defaultTimeSignature}.
@endpredefined


@snippets
@lilypondfile[verbatim,quote,texidoc,doctitle]
{time-signature-printing-only-the-numerator-as-a-number-instead-of-the-fraction.ly}

@seealso
Glosario musical:
@rglos{time signature}

Referencia de la notación:
@ref{Indicaciones de compás de la música mensural},
@ref{Establecer el comportamiento de las barras automáticas},
@ref{Gestión del tiempo}.

Archivos instalados:
@file{scm/time-signature-settings.scm}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{TimeSignature},
@rinternals{Timing_translator}.


@node Indicaciones metronómicas
@unnumberedsubsubsec Indicaciones metronómicas
@translationof Metronome marks

@cindex tempo
@cindex pulsos por minuto
@cindex metrónomo, indicación de
@cindex metrónomo, indicación de, con texto

@funindex \tempo
@funindex tempo

Es muy sencillo escribir una indicación metronómica básica:

@lilypond[verbatim,quote,relative=1]
\tempo 4 = 120
c2 d
e4. d8 c2
@end lilypond

También se pueden imprimir indicaciones metronómicas
como un intervalo entre dos números:

@lilypond[verbatim,quote,relative=1]
\tempo 4 = 40 - 46
c4. e8 a4 g
b,2 d4 r
@end lilypond

Se pueden usar indicaciones de tempo con texto:

@lilypond[verbatim,quote,relative=2]
\tempo "Allegretto"
c4 e d c
b4. a16 b c4 r4
@end lilypond

La combinación de una indicación metronómica y un texto hace que la
marca de metrónomo se encierre entre paréntesis automáticamente:

@lilypond[verbatim,quote,relative=2]
\tempo "Allegro" 4 = 160
g4 c d e
d4 b g2
@end lilypond

En general, el texto puede ser cualquier objeto de marcado:

@lilypond[verbatim,quote,relative=2]
\tempo \markup { \italic Faster } 4 = 132
a8-. r8 b-. r gis-. r a-. r
@end lilypond

Se puede escribir una indicación metronómica entre paréntesis sin
ninguna indicación textual, escribiendo una cadena vacía en la
entrada:

@lilypond[verbatim,quote,relative=2]
\tempo "" 8 = 96
d4 g e c
@end lilypond

@funindex \markLengthOn
@funindex markLengthOn
@funindex \markLengthOff
@funindex markLengthOff

En una particella de un instrumento con períodos de silencio
largos, en ocasiones se suceden muy cerca distintas indicaciones
de tempo.  La instrucción @code{\markLengthOn} aporta un espacio
horizontal adicional para evitar que las indicaciones de tempo se
superpongan, y @code{\markLengthOff} restablece el comportamiento
predeterminado de ignorar las indicaciones de tempo para el
espaciado horizontal.

@lilypond[verbatim,quote,relative=0]
\compressFullBarRests
\markLengthOn
\tempo "Molto vivace"
R1*12
\tempo "Meno mosso"
R1*16
\markLengthOff
\tempo "Tranquillo"
R1*20
@end lilypond

@snippets

@lilypondfile[verbatim,quote,texidoc,doctitle]
{printing-metronome-and-rehearsal-marks-below-the-staff.ly}

@c perhaps also an example of how to move it horizontally?

@lilypondfile[verbatim,quote,texidoc,doctitle]
{changing-the-tempo-without-a-metronome-mark.ly}

@lilypondfile[verbatim,quote,texidoc,doctitle]
{creating-metronome-marks-in-markup-mode.ly}

Para ver más detalles, consulte @ref{Formatear el texto}.

@seealso
Glosario musical:
@rglos{metronome},
@rglos{metronomic indication},
@rglos{tempo indication},
@rglos{metronome mark}.

Referencia de la notación:
@ref{Formatear el texto},
@ref{Salida MIDI}.

Fragmentos de código:
@rlsr{Staff notation}.

Referencia de funcionamiento interno::
@rinternals{MetronomeMark}.


@node Anacrusas
@unnumberedsubsubsec Anacrusas
@translationof Upbeats

@cindex anacrusa
@cindex parte al alzar
@cindex compás parcial
@cindex parcial, compás
@cindex compás de anacrusa

@funindex measurePosition
@funindex \partial
@funindex partial

Los compases parciales como las @emph{anacrusas} o partes
@emph{al alzar} se escriben usando la instrucción
@code{\partial}:

@example
\partial @var{duración}
@end example

@noindent
donde @code{@var{duración}} es la longitud @emph{restante}
del compás parcial @emph{antes} del comienzo del siguiente
compás completo.

@lilypond[quote,verbatim,relative=1]
\time 3/4
\partial 8
e8 | a4 c8 b c4 |
@end lilypond

La @var{duración} puede ser cualquier valor menor de un compás
completo:

@lilypond[quote,verbatim,relative=1]
\time 3/4
\partial 4.
r4 e8 | a4 c8 b c4 |
@end lilypond

El @code{\partial @var{duración}} se puede también escribir como:

@example
\set Timing.measurePosition -@var{duración}
@end example

Así que el primer ejemplo podría haberse escrito así:

@lilypond[quote,verbatim,relative=1]
\time 3/4
\set Timing.measurePosition = #(ly:make-moment -1/8)
e8 | a4 c8 b c4 |
@end lilypond

La propiedad @code{measurePosition} contiene un número racional,
que suele ser positivo y que indica qué porción del compás ha
transcurrido hasta ahora en este punto.  La instrucción
@code{\partial @var{duración}} lo establece a un número negativo,
en cuyo caso tiene un significado distinto: en esta ocasión indica
que el compás actual (el primero) será @emph{precedido} por un
compás cero (el compás parcial) con una duración dada por el valor
@var{duración}.

@seealso
Glosario musical:
@rglos{anacrusis}.

Referencia de la notación:
@ref{Notas de adorno}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{Timing_translator}.

@knownissues
La instrucción @code{\partial} debe usarse solamente en el comienzo de
una pieza.  Si se emplea después del comienzo se obtendrán varias
advertencias o efectos desagradables, en este caso utilice en su lugar
@code{\set Timing.measurePosition}.

@lilypond[quote,verbatim,relative=1]
\time 6/8
\partial 8
e8 | a4 c8 b[ c b] |
\set Timing.measurePosition = #(ly:make-moment -1/4)
r8 e,8 | a4 c8 b[ c b] |
@end lilypond


@node Música sin compasear
@unnumberedsubsubsec Música sin compasear
@translationof Unmetered music

@cindex cadencia
@cindex cadencia, barras
@cindex cadencia, alteraciones
@cindex cadencia, barras de compás
@cindex cadencia, números de compás
@cindex música sin metro
@cindex música sin metro, barras
@cindex música sin metro, alteraciones
@cindex música sin metro, barras de compás
@cindex música sin metro, números de compás
@cindex alteraciones, cadencias
@cindex alteraciones, música sin metro
@cindex barras de compás, música sin metro
@cindex números de compás, cadencias
@cindex números de compás, música sin metro
@cindex barras, cadencias
@cindex barras, música sin metro

@funindex \cadenzaOn
@funindex cadenzaOn
@funindex \cadenzaOff
@funindex cadenzaOff

En la música medida se insertan líneas divisorias
y se calculan los números de compás automáticamente.
En música sin metro (es decir, cadencias), esto no es deseable
y se puede @q{desactivar} usando la instrucción
@code{\cadenzaOn}, para despúes @q{reactivarlo} en el lugar
adecuado usando @code{\cadenzaOff}.

@lilypond[verbatim,relative=2,quote]
c4 d e d
\cadenzaOn
c4 c d8[ d d] f4 g4.
\cadenzaOff
\bar "|"
d4 e d c
@end lilypond

La numeración de compases se continúa al final de la cadencia.

@lilypond[verbatim,relative=2,quote]
% Show all bar numbers
\override Score.BarNumber.break-visibility = #all-visible
c4 d e d
\cadenzaOn
c4 c d8[ d d] f4 g4.
\cadenzaOff
\bar "|"
d4 e d c
@end lilypond

Al insertar una instrucción @code{\bar} dentro de una cadencia no
se inicia un compás nuevo, incluso aunque se imprima una línea
divisoria.  Así pues, las alteraciones accidentales (cuyo efecto
se suele suponer que permanece hasta el final del compás) serán
válidas aún después de la línea divisoria que se imprime por parte
de @code{\bar}.  Si se quieren imprimir alteraciones accidentales
posteriores tendrán que insertarse manualmente alteraciones
forzadas o de cortesía, véase @ref{Alteraciones accidentales}.

@lilypond[verbatim,relative=2,quote]
c4 d e d
\cadenzaOn
cis4 d cis d
\bar "|"
% First cis is printed without alteration even if it's after a \bar
cis4 d cis! d
\cadenzaOff
\bar "|"
@end lilypond

El barrado automático se desactiva mediante @code{\cadenzaOn}.
Por tanto, todo el barrado en las
cadencias se debe introducir manualmente.
Véase @ref{Barras manuales}.

@lilypond[verbatim,relative=2,quote]
\repeat unfold 8 { c8 }
\cadenzaOn
cis8 c c c c
\bar"|"
c8 c c
\cadenzaOff
\repeat unfold 8 { c8 }
@end lilypond

Estas instrucciones predefinidas afectan a todas las
pautas de la partitura, aunque aparezcan en un solo contexto
@code{Voice}.  Para cambiar esto, traslade el
@code{Timing_translator} del contexto @code{Score} al contexto
@code{Staff}, véase @ref{Notación polimétrica}.

@predefined
@code{\cadenzaOn},
@code{\cadenzaOff}.
@endpredefined

@seealso
Glosario musical:
@rglos{cadenza}.

Referencia de la notación:
@ref{Visibilidad de los objetos},
@ref{Notación polimétrica},
@ref{Barras manuales},
@ref{Alteraciones accidentales}.

Fragmentos de código:
@rlsr{Rhythms}.

@cindex cadencias, saltos de línea en
@cindex cadencias, saltos de página en
@cindex sin medida, música, saltos de línea en
@cindex sin medida, música, saltos de página en
@cindex saltos, en música sin medida
@cindex saltos de línea, cadencias
@cindex saltos de página, cadencias
@cindex saltos de línea, música sin medida
@cindex saltos de página, música sin medida

@knownissues
Sólo se insertan saltos de línea y de página automáticamente
en las líneas divisorias,
por lo que es necesario insertar manualmente líneas divisorias
@q{invisibles} en fragmentos largos de música sin medir para permitir
los saltos:

@example
\bar ""
@end example


@node Notación polimétrica
@unnumberedsubsubsec Notación polimétrica
@translationof Polymetric notation

@c This section necessarily uses \set
@c This is acceptable  -td

@cindex compás, doble
@cindex compases polimétricos
@cindex polimétricos, compases
@cindex metro polimétrico
@cindex doble compás

@funindex timeSignatureFraction
@funindex \scaleDurations
@funindex scaleDurations
@funindex \tuplet
@funindex tuplet

Está contemplada la notación polimétrica, ya sea explícitamente o
mediante la modificación manual de la indicación visible del compás y/o el
escalado de la duración de las notas.

@subsubsubheading Pentagramas con distintas indicaciones de compás y compases de igual longitud

Establezca una indicación de compás común para cada pentagrama, y fije
@code{timeSignatureFraction} a la fracción deseada.  Luego use la función
@code{\scaleDurations} para escalar las duraciones de las notas en cada
pauta a la indicación de compás común.

@cindex barras en música polimétrica
@cindex polimétrico, metro, barras en 

En el siguiente ejemplo, se usa en paralelo música con compases de 3/4, 9/8 y
10/8.  En el segundo pentagrama, las duraciones mostradas se
multiplican por 2/3 (pues 2/3 * 9/8 = 3/4), y en el tercer pentagrama,
las duraciones que se muestran están multiplicadas por 3/5 (pues 3/5 *
10/8 = 3/4).  Con frecuencia habrá que insertar las barras de
forma manual, pues el escalado de las duraciones afecta a las reglas
de barrado automático.

@lilypond[quote,verbatim]
\relative c' <<
  \new Staff {
    \time 3/4
    c4 c c |
    c4 c c |
  }
  \new Staff {
    \time 3/4
    \set Staff.timeSignatureFraction = 9/8
    \scaleDurations 2/3
      \repeat unfold 6 { c8[ c c] }
  }
  \new Staff {
    \time 3/4
    \set Staff.timeSignatureFraction = 10/8
    \scaleDurations 3/5 {
      \repeat unfold 2 { c8[ c c] }
      \repeat unfold 2 { c8[ c] } |
      c4. c \tuplet 3/2 { c8[ c c] } c4
    }
  }
>>
@end lilypond

@subsubsubheading Pentagramas con distintas indicaciones de compás y longitudes de compás distintas

Se puede dar a cada pentagrama su propia indicación de compás
independiente trasladando los grabadores @code{Timing_translator} y
@code{Default_bar_line_engraver} al contexto de @code{Staff}.

@lilypond[quote,verbatim]
\layout {
  \context {
    \Score
    \remove "Timing_translator"
    \remove "Default_bar_line_engraver"
  }
  \context {
    \Staff
    \consists "Timing_translator"
    \consists "Default_bar_line_engraver"
  }
}

% Now each staff has its own time signature.

\relative c' <<
  \new Staff {
    \time 3/4
    c4 c c |
    c4 c c |
  }
  \new Staff {
    \time 2/4
    c4 c |
    c4 c |
    c4 c |
  }
  \new Staff {
    \time 3/8
    c4. |
    c8 c c |
    c4. |
    c8 c c |
  }
>>
@end lilypond

@funindex \compoundMeter
@cindex compuesto, indicaciones de compás
@cindex compás compuesto, indicación de

@subsubsubheading Indicaciones de compás compuesto

Se crean usando la función @code{\compoundMeter}.  La sintaxis es:

@example
\compoundMeter #'@code{(lista de listas)}
@end example

La construcción más simple es una lista única, en la que el
@emph{último} número indica el denominador de la indicación de compás
y los anteriores son los numeradores.

@lilypond[quote,verbatim]
\relative c' {
  \compoundMeter #'((2 2 2 8))
  \repeat unfold 6 c8 \repeat unfold 12 c16
}
@end lilypond

Se pueden construir compases más complejos utilizando listas
adicionales.  Asimismo, los ajustes de barrado se ajustarán
dependiendo de los valores.

@lilypond[quote,verbatim]
\relative c' {
  \compoundMeter #'((1 4) (3 8))
  \repeat unfold 5 c8 \repeat unfold 10 c16
}

\relative c' {
  \compoundMeter #'((1 2 3 8) (3 4))
  \repeat unfold 12 c8
}
@end lilypond

@seealso
Glosario musical:
@rglos{polymetric},
@rglos{polymetric time signature},
@rglos{meter}.

Referencia de la notación:
@ref{Barras automáticas},
@ref{Barras manuales},
@ref{Indicación de compás},
@ref{Escalar las duraciones}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{TimeSignature},
@rinternals{Timing_translator},
@rinternals{Default_bar_line_engraver},
@rinternals{Staff}.

@knownissues
Al usar distintos compases en paralelo, las notas que están en el
mismo instante de tiempo se colocan en la misma posición horizontal.
Sin embargo, las barras de compás en los distintos pentagramas harán
que el espaciado de notas sea menos regular en cada pentagrama
individual de lo que sería normal sin las distintas indicaciones de
compás.


@node División automática de las notas
@unnumberedsubsubsec División automática de las notas
@translationof Automatic note splitting

@cindex notas, división de
@cindex división de notas
@cindex silencios, división de
@cindex división de silencios

@funindex Note_heads_engraver
@funindex Completion_heads_engraver
@funindex Completion_rest_engraver

Las notas largas se pueden convertir automáticamente en notas ligadas.
Se hace mediante la sustitución del @code{Note_heads_engraver} por el
@code{Completion_heads_engraver}.  De forma similar, los silencios largos que
sobrepasan líneas de compás se dividen automáticamente sustituyendo el
grabador @code{Rest_engraver} con el grabador @code{Completion_rest_engraver}.
En el ejemplo siguiente, las notas y los silencios que atraviesan la barra
de compás se dividen, y además las notas se unen mediante una ligadura.

@lilypond[quote,verbatim,relative=1]
\new Voice \with {
  \remove "Note_heads_engraver"
  \consists "Completion_heads_engraver"
  \remove "Rest_engraver"
  \consists "Completion_rest_engraver"
}

{ c2. c8 d4 e f g a b c8 c2 b4 a g16 f4 e d c8. c2 r1*2 }
@end lilypond

Estos grabadores dividen todas las notas y silencios largos en la
barra de compás, e inserta ligaduras en las notas.
Uno de sus usos es depurar partituras complejas:
si los compases no están completos, las ligaduras mostrarán
exactamente cuánto le falta a cada compás.

@seealso
Glosario musical:
@rglos{tie}

Manual de aprendizaje:
@rlearning{Explicación de los grabadores},
@rlearning{Añadir y eliminar grabadores}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{Note_heads_engraver},
@rinternals{Completion_heads_engraver},
@rinternals{Rest_engraver},
@rinternals{Completion_rest_engraver},
@rinternals{Forbid_line_break_engraver}.

@knownissues
No todas las duraciones (sobre todo las que contienen grupos
especiales) se pueden representar exactamente con notas normales y
puntillos, pero el grabador @code{Completion_heads_engraver} nunca
insertará grupos especiales.

@code{Completion_heads_engraver} afecta sólo a las notas; no divide
silencios.


@node Mostrar los ritmos de la melodía
@unnumberedsubsubsec Mostrar los ritmos de la melodía
@translationof Showing melody rhythms

@cindex melodía, mostrar las duraciones
@cindex duraciones de la melodía, mostrar

A veces podemos querer mostrar solamente el ritmo de una melodía.
Esto se puede hacer con un pentagrama de ritmo.  Todas las alturas de
las notas se convierten en barras inclinadas, y el pentagrama tiene
una sola línea:

@lilypond[quote,relative=1,verbatim]
<<
  \new RhythmicStaff {
    \new Voice = "myRhythm" {
      \time 4/4
      c4 e8 f g2
      r4 g g f
      g1
    }
  }
  \new Lyrics {
    \lyricsto "myRhythm" {
      This is my song
      I like to sing
    }
  }
>>
@end lilypond

@cindex guitarra, tablas de acordes
@cindex rasgueado, mostrar ritmos
@cindex guitarra, mostrar ritmos rasgueados

@funindex Pitch_squash_engraver
@funindex \improvisationOn
@funindex improvisationOn
@funindex \improvisationOff
@funindex improvisationOff

Las tablas de acordes de guitarra ofrecen a menudo los ritmos de
rasgueado.  Esto se puede hacer con el grabador
@code{Pitch_squash_engraver} y @code{\improvisationOn}.

@lilypond[quote,verbatim]
<<
  \new ChordNames {
    \chordmode {
      c1 f g c
    }
  }
  \new Voice \with {
    \consists "Pitch_squash_engraver"
  } \relative c'' {
    \improvisationOn
    c4 c8 c c4 c8 c
    f4 f8 f f4 f8 f
    g4 g8 g g4 g8 g
    c4 c8 c c4 c8 c
  }
>>
@end lilypond


@predefined
@code{\improvisationOn},
@code{\improvisationOff}.
@endpredefined


@snippets

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{guitar-strum-rhythms.ly}

@seealso
Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{RhythmicStaff},
@rinternals{Pitch_squash_engraver}.


@node Barras
@subsection Barras
@translationof Beams

@menu
* Barras automáticas::
* Establecer el comportamiento de las barras automáticas::
* Barras manuales::
* Barras progresivas::
@end menu

@node Barras automáticas
@unnumberedsubsubsec Barras automáticas
@translationof Automatic beams

De manera predeterminada, las barras de corchea se insertan
automáticamente:

@cindex barras manuales
@cindex manuales, barras
@cindex barras, reglas personalizadas

@funindex \autoBeamOn
@funindex autoBeamOn
@funindex \autoBeamOff
@funindex autoBeamOff

@lilypond[quote,verbatim,relative=2]
\time 2/4 c8 c c c
\time 6/8 c8 c c c8. c16 c8
@end lilypond

Cuando estas decisiones automáticas no son lo bastante buenas, se
pueden escribir los barrados de forma explícita; véase @ref{Barras manuales}.  Las barras @emph{se deben} introducir manualmente si se
quieren extender por encima de los silencios.

Si no se necesita el barrado automático, se puede desactivar con
@code{\autoBeamOff} y activarse con @code{\autoBeamOn}:

@lilypond[quote,relative=1,verbatim]
c4 c8 c8. c16 c8. c16 c8
\autoBeamOff
c4 c8 c8. c16 c8.
\autoBeamOn
c16 c8
@end lilypond

@cindex melismas, barras en
@cindex barras y melismas

@warning{Si se usan barras para indicar los melismas de las canciones,
entonces se debe desactivar el barrado automático con
@code{@bs{}autoBeamOff} e indicar las barras manualmente.
La utilización de @code{@bs{}partcombine} con
@code{@bs{}autoBeamOff} puede producir resultados no deseados.  Véanse
los fragmentos de código para mayor información.}

Se pueden crear patrones de barrado que difieran de los valores
automáticos predeterminados; véase @ref{Establecer el comportamiento de las barras automáticas}.

@predefined
@code{\autoBeamOff},
@code{\autoBeamOn}.
@endpredefined

@cindex barras en saltos de línea
@cindex línea, barras en saltos de
@cindex barras en ángulo
@cindex dobladas, barras
@funindex breakable

@snippets
@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{beams-across-line-breaks.ly}

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{changing-beam-knee-gap.ly}

@cindex barras, \partcombine con \autoBeamOff
@cindex voces, \partcombine con \autoBeamOff

@lilypondfile [verbatim, quote, ragged-right, texidoc, doctitle]
{partcombine-and-autobeamoff.ly}

@seealso
Referencia de la notación:
@ref{Barras manuales},
@ref{Establecer el comportamiento de las barras automáticas}.

Archivos instalados:
@file{scm/auto-beam.scm}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{Auto_beam_engraver},
@rinternals{Beam_engraver},
@rinternals{Beam},
@rinternals{BeamEvent},
@rinternals{BeamForbidEvent},
@rinternals{beam-interface},
@rinternals{unbreakable-spanner-interface}.

@knownissues
Las propiedades de una barra vienen determinadas al
@emph{comienzo} de su construcción y cualquier cambio adicional en
las propiedades de la barra que se produzca antes de que la barra se ha
completado no tendrá efecto hasta que inicie la @emph{siguiente}
barra nueva.


@node Establecer el comportamiento de las barras automáticas
@unnumberedsubsubsec Establecer el comportamiento de las barras automáticas
@translationof Setting automatic beam behavior

@cindex barras y letra
@cindex letra y barras

@funindex autoBeaming
@funindex baseMoment
@funindex beamExceptions
@funindex beatStructure
@funindex measureLength
@funindex \time
@funindex time
@funindex \set
@funindex set

Cuando está habilitado el barrado automático, la colocación de las
barras automáticas viene determinada por tres propiedades de
contexto: @code{baseMoment}, @code{beatStructure} y
@code{beamExceptions}.  Los valores predeterminados de estas
variables se pueden sobreescribir como se describe más abajo, o de
forma alternativa los propios valores predeterminados se pueden
cambiar como se explica en @ref{Indicación de compás}.

Si hay definida una regla de @code{beamExceptions} para el compás
en curso, se usa dicha regla para determinar la colocación de las
barras; se ignoran los valores de @code{baseMoment} y
@code{beatStructure}.

Si no está definida ninguna regla de
@code{beamExceptions} para el tipo de compás en curso, la
colocación de las barras está determinada por los valores de
@code{baseMoment} y @code{beatStructure}.

@subsubsubheading Barrado basado en @code{baseMoment} y @code{beatStructure}

De forma predeterminada, las reglas de @code{beamExceptions} están
definidas para los compases más comunes, y así las reglas de
@code{beamExceptions} se deben desactivar si pretendemos que el
barrado automático esté basado en @code{baseMoment} y
@code{beatStructure}.  Las reglas de @code{beamExceptions} se
desactivan mediante

@example
\set Timing.beamExceptions = #'()
@end example

Cuando el valor de @code{beamExceptions} se ha fijado a
@code{#'()}, ya sea debido a un ajuste explícito o a causa de que
no hay ninguna regla de @code{beamExceptions} definida
internamente para el compás actual, los puntos finales de las
barras están en los pulsos según viene determinado por las
propiedades de contexto @code{baseMoment} y @code{beatStructure}.
@code{beatStructure} es una lista de Scheme que define la longitud
de cada pulso dentro del compás en unidades de @code{baseMoment}.
De forma predeterminada, @code{baseMoment} es una unidad más que
el denominador del compás.  De forma predeterminada también, cada
unidad de longitud @code{baseMoment} es un único pulso.

@lilypond[quote,relative=2,verbatim]
\time 5/16
c16^"default" c c c c |
% beamExceptions are unlikely to be defined for 5/16 time,
% but let's disable them anyway to be sure
\set Timing.beamExceptions = #'()
\set Timing.beatStructure = #'(2 3)
c16^"(2+3)" c c c c |
\set Timing.beatStructure = #'(3 2)
c16^"(3+2)" c c c c |
@end lilypond

@lilypond[quote,relative=2,verbatim]
\time 4/4
a8^"default" a a a a a a a
% Disable beamExceptions because they are definitely
% defined for 4/4 time
\set Timing.beamExceptions = #'()
\set Timing.baseMoment = #(ly:make-moment 1/4)
\set Timing.beatStructure = #'(1 1 1 1)
a8^"changed" a a a a a a a
@end lilypond

Los cambios en los ajustes de barrado se pueden limitar a contextos
específicos.  Si no se incluye ningún ajuste en un contexto de nivel
más bajo, se aplican los ajustes del contexto circundante.

@lilypond[quote, verbatim,relative=1]
\new Staff {
  \time 7/8
  % No need to disable beamExceptions
  % as they are not defined for 7/8 time
  \set Staff.beatStructure = #'(2 3 2)
  <<
    \new Voice = one {
      \relative c'' {
        a8 a a a a a a
      }
    }
    \new Voice = two {
      \relative c' {
        \voiceTwo
        \set Voice.beatStructure = #'(1 3 3)
        f8 f f f f f f
      }
    }
  >>
}
@end lilypond

En caso de usar varias voces, se debe especificar el contexto
@code{Staff} si queremos aplicar el barrado a todas las voces del
pentagrama:

@lilypond[quote,verbatim,relative=2]
\time 7/8
% rhythm 3-1-1-2
% Change applied to Voice by default --  does not work correctly
% Because of autogenerated voices, all beating will
% be at baseMoment (1 . 8)
\set beatStructure = #'(3 1 1 2)
<< {a8 a a a16 a a a a8 a} \\ {f4. f8 f f f} >>

% Works correctly with context Staff specified
\set Staff.beatStructure = #'(3 1 1 2)
<< {a8 a a a16 a a a a8 a} \\ {f4. f8 f f f} >>
@end lilypond

El valor de @code{baseMoment} se puede ajustar para cambiar el
comportamiento de las barras, si se desea.  Cuando se hace, el valor
de @code{beatStructure} se debe fijar de manera que sea compatible con
el nuevo valor de @code{baseMoment}.

@lilypond[quote,verbatim,relative=2]
\time 5/8
% No need to disable beamExceptions
% as they are not defined for 5/8 time
\set Timing.baseMoment = #(ly:make-moment 1/16)
\set Timing.beatStructure = #'(7 3)
\repeat unfold 10 { a16 }
@end lilypond

@code{baseMoment} es un @i{momento}, una unidad de duración musical.
Se crea una cantidad del tipo @i{momento} por medio de la función de
Scheme @code{ly:make-moment}.  Para ver más información acerca de esta
función, consulte @ref{Gestión del tiempo}.

De forma predeterminada @code{baseMoment} está fijado a una unidad más
que el denominador del compás.  Todas las excepciones a este valor
predeterminado están en
@file{scm/time-signature-settings.scm}.

@subsubsubheading Barrado basado en @code{beamExceptions}

Las reglas de autobarrado especiales (distintas de terminar una barra
sobre un pulso) están definidas en la propiedad @code{beamExceptions}.

@lilypond[quote,relative=2,verbatim]
\time 3/16
\set Timing.beatStructure = #'(2 1)
\set Timing.beamExceptions =
  #'(                         ;start of alist
     (end .                   ;entry for end of beams
      (                       ;start of alist of end points
       ((1 . 32) . (2 2 2))   ;rule for 1/32 beams -- end each 1/16
      )))                     %close all entries
c16 c c |
\repeat unfold 6 { c32 } |
@end lilypond

@code{beamExceptions} es una lista-A con una clave de rule-type y un
valor de beaming-rules.

En este momento el único valor disponible de rule-type es @code{'end}
para la terminación de las barras.

Beaming-rules es una lista-A de Scheme (o una lista de parejas) que
indica el tipo de barra y la agrupación que se aplica a las barras que
contienen notas con una duración más breve de ese tipo de barra.

@example
#'((tipo-barra1 . agrupación1)
   (tipo-barra2 . agrupación2)
   (tipo-barra3 . agrupación3))
@end example

Tipo de barra es una dupla de Scheme que indica la duración de la
barra, p.ej. @code{(1 . 16)}.

Agrupación es una lista de Scheme que indica la agrupación que aplicar
a la barra.  El valor de agrupación está en unidades del tipo de
barra.

@warning{ Un valor de @code{beamExceptions} debe ser una lista de
excepciones @emph{completa}.  Esto es, toda excepción que se tenga que
aplicar debe estar incluida en este ajuste.  No es posible añadir,
eliminar o cambiar sólo una de las excepciones.  Aunque esto puede
parecer engorroso, significa que no es necesario conocer los ajustes
de barrado actuales para poder especificar un patrón de barrado
nuevo.}

Cuando cambia el compás, se fijan los valores predeterminados de
@code{Timing.baseMoment}, @code{Timing.beatStructure} y
@code{Timing.beamExceptions}.  Un ajuste en el tipo de compás da como
resultado un reinicio de los ajustes de barrado automático para el
contexto @code{Timing} al comportamiento predeterminado.

@lilypond[quote,verbatim,relative=2]
\time 6/8
\repeat unfold 6 { a8 }
% group (4 + 2)
\set Timing.beatStructure = #'(4 2)
\repeat unfold 6 { a8 }
% go back to default behavior
\time 6/8
\repeat unfold 6 { a8 }
@end lilypond

Los ajustes de barrado automático predeterminados para un tipo de
compás están determinados en el archivo
@file{scm/time-signature-settings.scm}.  La forma de cambiar los
ajustes predeterminados de barrado automático para un tipo de
compás se describe en @ref{Indicación de compás}.

Muchos ajustes de barrado automáticos para un tipo de compás
contienen una entrada para @code{beamExceptions}.  Por ejemplo, el
compás de 4/4 trata de unir el compás en dos partes si solo hay
corcheas.  La regla @code{beamExceptions} puede sobreescribir el
ajuste @code{beatStructure} si no se reinicia @code{beamExceptions}.

@lilypond[quote,verbatim,relative=2]
\time 4/4
\set Timing.baseMoment = #(ly:make-moment 1/8)
\set Timing.beatStructure = #'(3 3 2)
% This won't beam (3 3 2) because of beamExceptions
\repeat unfold 8 {c8} |
% This will beam (3 3 2) because we clear beamExceptions
\set Timing.beamExceptions = #'()
\repeat unfold 8 {c8}
@end lilypond

De forma similar, las corcheas en compás de 3/4 se unen mediante una
sola barra para todo el compás, de forma predeterminada.  Para unir
las corcheas en 3/4 mediante una barra en cada parte, reinicie
@code{beamExceptions}.

@lilypond[quote,verbatim,relative=2]
\time 3/4
% by default we beam in (6) due to beamExceptions
\repeat unfold 6 {a8} |
% This will beam (1 1 1) due to default baseMoment and beatStructure
\set Timing.beamExceptions = #'()
\repeat unfold 6 {a8}
@end lilypond

En la música tipografiada de los períodos clásico y romántico, con
frecuencia las barras comienzan a mitad de un compás en 3/4, pero la
práctica moderna es evitar la falsa impresión de 6/8 (véase Gould,
pág. 153).  Se producen situaciones similares en el compás de 3/8.
Este comportamiento viene controlado mediante la propiedad de contexto
@code{beamHalfMeasure}, que tiene efecto solamente sobre indicaciones
de compás que tienen la cifra 3 en el numerador:

@lilypond[quote,verbatim,relative=2]
\time 3/4
r4. a8 a a |
\set Timing.beamHalfMeasure = ##f
r4. a8 a a |
@end lilypond

@subsubsubheading Cómo funciona el barrado automático

Cuando se habilita el barrado automático, la colocación de las barras
de corchea automáticas viene determinada por las propiedades de
contexto @code{baseMoment}, @code{beatStructure} y
@code{beamExceptions}.

Son de aplicación las siguientes reglas, en orden de prioridad, cuando
se determina el aspecto de las barras:

@itemize
@item
Si está especificada una barra manual con @code{[@dots{}]}, fijar la barra
tal y como se ha especificado; en caso contrario,

@item
si está definida en @code{beamExceptions} una regla de barrado para
este tipo de barra, utilizarla para determinar los lugares válidos en
que pueden terminar las barras; en caso contrario,

@item
si está definida en @code{beamExceptions} una regla de final de barra
para un tipo de barra más largo, utilizarla para determinar los
lugares válidos en que pueden terminar las barras; en caso contrario,

@item
usar los valores de @code{baseMoment} y de @code{beatStructure} para
determinar los finales de los pulsos dentro del compás, y terminar las
barras al final de los pulsos.

@end itemize

En las reglas anteriores, el tipo de barra @emph{beam-type} es
la duración de la nota más breve dentro del grupo unido por una barra.

Las reglas de barrado predefinidas están
en el archivo @file{scm/time-signature-settings.scm}.

@snippets
@cindex barras, subdivisión

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{subdividing-beams.ly}

@cindex barras, orientación de, secundarias

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{strict-beat-beaming.ly}

@cindex compás, agrupación
@cindex pulsos, agrupación
@cindex agrupar pulsos
@cindex compases, sub-agrupar

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{conducting-signs,-measure-grouping-signs.ly}

@cindex barra, finales en la partitura
@cindex barra, finales con varias voces

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{beam-endings-in-score-context.ly}

@seealso
Referencia de la notación:
@ref{Indicación de compás}.

Archivos de inicio:
@file{scm/time-signature-settings.scm}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{Auto_beam_engraver},
@rinternals{Beam},
@rinternals{BeamForbidEvent},
@rinternals{beam-interface}.

@knownissues
Si una partitura termina mientras una barra de corchea automática no
ha terminado y aún acepta notas, esta última barra no se imprime en
absoluto.  Lo mismo sirve para las voces polifónicas introducidas con
@code{<< @dots{} \\ @dots{} >>}.  Si una voz polifónica termina
mientras una barra de corchea automática aún admite notas, no se
imprime.  El rodeo para estos problemas es aplicar el barrado manual a
la última barra de la voz o partitura.

De forma predeterminada, el traductor @code{Timing} recibe el nombre
del contexto @code{Score} como alias.  Esto significa que el
establecimiento del compás en ua pauta afectará al barrado de las
otras pautas también.  Así, un ajuste en el compás en un pentagrama
tardío reiniciará el barrado personalizado que se había ajustado en un
pentagrama más temprano.  Una forma de evitar este problema es ajustar
la indicación de compás en un pentagrama solamente.

@lilypond[quote,verbatim,relative=2]
<<
  \new Staff {
    \time 3/4
    \set Timing.baseMoment = #(ly:make-moment 1/8)
    \set Timing.beatStructure = #'(1 5)
    \repeat unfold 6 { a8 }
  }
  \new Staff {
    \repeat unfold 6 { a8 }
  }
>>
@end lilypond

Los ajustes de barrado predeterminados para dicho compás también se
pueden cambiar, de forma que siempre se utilice siempre el barrado
deseado. La manera de efectuar cambios en los ajustes de barrado
automático para una indicación de compás se describe en
@ref{Indicación de compás}.

@lilypond[quote,verbatim,relative=2]
<<
  \new Staff {
    \overrideTimeSignatureSettings
      3/4               % timeSignatureFraction
      1/8               % baseMomentFraction
      #'(1 5)           % beatStructure
      #'()		% beamExceptions
    \time 3/4
    \repeat unfold 6 { a8 }
  }
  \new Staff {
    \time 3/4
    \repeat unfold 6 { a8 }
  }
>>
@end lilypond


@node Barras manuales
@unnumberedsubsubsec Barras manuales
@translationof Manual beams

@cindex barras manuales
@cindex manuales, barras

@funindex ]
@funindex [

En ciertos casos puede ser preciso sobreescribir el algoritmo de
barrado automático.  Por ejemplo, el barrador automático no escribe
barras por encima de los silencios o las líneas divisorias, y en las
partituras corales el barrado se ajusta con frecuencia para que siga
la medida de la letra en vez de la de las notas.  Tales barras se
especifican manualmente marcando los puntos de comienzo y final con
@code{[} y @code{]}

@lilypond[quote,relative=1,verbatim]
r4 r8[ g' a r] r g[ | a] r
@end lilypond

@cindex barras manuales, abreviatura de dirección
@cindex barras manuales, notas de adorno

La dirección de las barras se puede establecer manualmente utilizando
indicadores de dirección:

@lilypond[quote,relative=2,verbatim]
c8^[ d e] c,_[ d e f g]
@end lilypond

@funindex \noBeam
@funindex noBeam

Se pueden marcar notas individuales con @code{\noBeam} para evitar que
resulten unidas por una barra:

@lilypond[quote,verbatim,relative=2]
\time 2/4
c8 c\noBeam c c
@end lilypond

Se pueden producir al mismo tiempo barras de notas de adorno y barras
normales.  Las notas de adorno sin barra no se colocan dentro de las
barras de notas normales.

@lilypond[quote,verbatim,relative=2]
c4 d8[
\grace { e32 d c d }
e8] e[ e
\grace { f16 }
e8 e]
@end lilypond

@funindex stemLeftBeamCount
@funindex stemRightBeamCount

Se puede conseguir un control incluso más estricto sobre las barras
estableciendo las propiedades @code{stemLeftBeamCount} y
@code{stemRightBeamCount}.  Especifican el número de barras que se
dibujarán en los lados izquierdo y derecho, respectivamente, de la
nota siguiente.  Si cualquiera de estas dos propiedades está ajustada
a un valor, dicho valor se usará una sola vez, y luego se borrará.  En
este ejemplo, el último Fa se imprime con sólo una barra en el lado
izquierdo, es decir, la barra de corchea del grupo como un todo.

@lilypond[quote,relative=2,verbatim]
a8[ r16 f g a]
a8[ r16
\set stemLeftBeamCount = #2
\set stemRightBeamCount = #1
f16
\set stemLeftBeamCount = #1
g16 a]
@end lilypond

@predefined
@code{\noBeam}.
@endpredefined

@snippets
@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{flat-flags-and-beam-nibs.ly}

@seealso
Referencia de la notación:
@ref{Dirección y posición},
@ref{Notas de adorno}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{Beam},
@rinternals{BeamEvent},
@rinternals{Beam_engraver},
@rinternals{beam-interface},
@rinternals{Stem_engraver}.


@node Barras progresivas
@unnumberedsubsubsec Barras progresivas
@translationof Feathered beams

@cindex barras progresivas
@cindex progresivas, barras

@funindex \featherDurations
@funindex featherDurations
@funindex grow-direction

Las barras progresivas se usan para indicar que un pequeño grupo de
notas se debe tocar a una velocidad creciente (o decreciente), sin
cambiar el tempo general de la pieza.  El ámbito de la barra progresiva
se debe indicar manualmente usando @code{[} y @code{]}, el efecto de
ángulo de la barra se inicia especificando una dirección en la
propiedad @code{grow-direction} del objeto @code{Beam}.

Si queremos que la colocación de las notas y el sonido de la salida
MIDI refleje el @emph{ritardando} o @emph{accelerando}
indicado por la barra
progresiva, las notas se deben agrupar como una expresión musical
delimitada por llaves y precedida de una instrucción
@code{featheredDurations} que especifica la razón entre las duraciones
de la primera y la última notas dentro del grupo.

Los corchetes rectos muestran el ámbito de la barra y las llaves
muestran qué notas han de modificar sus duraciones.  Normalmente
delimitarían el mismo grupo de notas, pero no es un requisito: las dos
instrucciones son independientes.

En el ejemplo siguiente las ocho semicorcheas ocupan exactamente el
mismo tiempo que una blanca, pero la primera nota tiene la mitad de
duración que la última, con las notas intermedias alargándose
gradualmente.  Las cuatro primeras fusas se aceleran gradualmente,
mientras que las últimas cuatro fusas están a un tempo constante.

@lilypond[relative=1,verbatim,quote]
\override Beam.grow-direction = #LEFT
\featherDurations #(ly:make-moment 2/1)
{ c16[ c c c c c c c] }
\override Beam.grow-direction = #RIGHT
\featherDurations #(ly:make-moment 2/3)
{ c32[ d e f] }
% revert to non-feathered beams
\override Beam.grow-direction = #'()
{ g32[ a b c] }
@end lilypond

@noindent
El espaciado en la salida impresa representa las duraciones de las
notas de una forma sólo aproximada, pero la salida MIDI es exacta.

@predefined
@code{\featherDurations}.
@endpredefined

@seealso
Fragmentos de código:
@rlsr{Rhythms}.

@knownissues
La instrucción @code{\featherDurations} sólo funciona con fragmentos
musicales muy breves, y cuando los números de la fracción son
pequeños.


@node Compases
@subsection Compases
@translationof Bars

@menu
* Barras de compás::
* Numeración de compases::
* Comprobación de compás y de número de compás::
* Llamadas de ensayo::
@end menu


@node Barras de compás
@unnumberedsubsubsec Barras de compás
@translationof Bar lines

@cindex barras de compás
@cindex líneas divisorias
@cindex final, barra
@cindex barra final
@cindex doble barra
@cindex barra doble
@cindex repetición, barras de

@funindex \bar
@funindex bar

Las líneas divisorias delimitan a los compases pero también se pueden
usar para indicar las repeticiones.  Normalmente, las líneas
divisorias normales se insertan de manera automática en la salida
impresa en lugares que están basados en el compás actual.

Las barras de compás sencillas insertadas automáticamente se pueden
cambiar por otros tipos con la instrucción @code{\bar}.  Por ejemplo,
se suele poner una doble barra de cierre al final de la pieza:

@lilypond[quote,relative=1,verbatim]
e4 d c2 \bar "|."
@end lilypond

No deja de ser válida la última nota de un compás si no termina sobre
la línea divisoria automática: se supone que la nota se prolonga sobre
el compás siguiente.  Pero una secuencia larga de dichos compases
prolongados puede hacer que la música aparezca comprimida o incluso
que se salga de la página.  Esto es a causa de que los saltos de línea
automáticos solamente se producen al final de compases completos, es
decir, cuando todas las notas han finalizado antes de que el compás
termine.

@warning{Una duración incorrecta puede hacer que se trate de evitar la
producción de saltos de línea, dando como resultado una línea de
música con una compresión exagerada o música que se sale de la
página.}

@cindex línea, saltos
@cindex líneas divisorias invisibles
@cindex compás, barras invisibles de

También se permiten saltos de línea en las barras insertadas
manualmente incluso dentro de compases incompletos.  Para permitir un
salto de línea donde no hay ninguna línea divisoria visible, utilice
lo siguiente:

@example
\bar ""
@end example

@noindent
De esta manera se insertará una barra invisible de compás y se hará
posible el salto de línea en este punto, sin forzarlo. No se
incrementa el contador de los números de compás.  Para forzar un salto
de línea, consulte @ref{Saltos de línea}.

@cindex manuales, líneas divisorias
@cindex manuales, barras de compás
@cindex barras de compás manuales
@cindex líneas divisorias manuales

Esta y otras líneas divisorias especiales se pueden insertar
manualmente en cualquier punto.  Cuando coinciden con el final de un
compás, sustituyen a la línea divisoria simple que se habría insertado
automáticamente en dicho lugar.  Cuando no coinciden con el final de
un compás, se inserta la línea especificada en ese punto en la salida
impresa.

Observe que las líneas divisorias manuales son puramente visuales.  No
afectan a ninguna de las propiedades que una barra normal afectaría,
como a los números de compás, alteraciones, saltos de línea, etc.  No
afectan tampoco al cálculo y colocación de las líneas divisorias
subsiguientes.  Cuando una divisoria se coloca manualmente donde ya
existe una divisoria normal, los efectos de la línea original no se
alteran.

Están disponibles para su inserción manual dos tipos de líneas
divisorias simples y cinco tipos de doble barra:

@lilypond[quote,relative=1,verbatim]
f1 \bar "|"
f1 \bar "."
g1 \bar "||"
a1 \bar ".|"
b1 \bar ".."
c1 \bar "|.|"
d1 \bar "|."
e1
@end lilypond

@noindent
así como la barra de puntos y la discontinua:

@lilypond[quote,relative=1,verbatim]
f1 \bar ";"
g1 \bar "!"
a1
@end lilypond

@noindent
y nueve tipos de barra de repetición:

@lilypond[quote,relative=1,verbatim]
f1 \bar ".|:"
g1 \bar ":..:"
a1 \bar ":|.|:"
b1 \bar ":|.:"
c1 \bar ":.|.:"
d1 \bar "[|:"
e1 \bar ":|][|:"
f1 \bar ":|]"
g1 \bar ":|."
a1
@end lilypond

Además se puede imprimir una línea divisoria como una marca corta:
@lilypond[quote,relative=1,verbatim]
f1 \bar "'" g1
@end lilypond
Sin embargo, dado que las mencionadas marcas se utilizan usualmente en
el canto gregoriano, es preferible en este caso utilizar
@code{\divisioMinima}, que se describe en la sección @ref{Divisiones}
dentro de Canto gregoriano.

LilyPond contempla la notación del canto kievano y ofrece una
línea divisoria especial kievana:
@lilypond[quote,relative=1,verbatim]
f1 \bar "k"
@end lilypond
Pueden verse más detalles de esta notación explicados en
@ref{Tipografiado del canto kievano en notación cuadrada}.

@cindex segno

Para los símbolos de segno en línea, existen tres tipos
de barras de compás que se diferencian en su comportamiento
en los saltos de línea:

@lilypond[quote,relative=2,verbatim]
c4 c c c
\bar "S"
c4 c c c \break
\bar "S"
c4 c c c
\bar "S-|"
c4 c c c \break
\bar "S-|"
c4 c c c
\bar "S-S"
c4 c c c \break
\bar "S-S"
c1
@end lilypond

@cindex repeticiones

Aunque se pueden insertar manualmente barras de compás con significado
de repeticiones, no se reconocen como repeticiones por parte de
LilyPond.  Las secciones repetidas se introducen mejor utilizando las
diversas instrucciones de repetición (véase @ref{Repeticiones}), que
imprimen automáticamente las barras correspondientes.

Además se puede especificar @code{".|:-||"}, que equivale a @code{".|:"}
excepto en los saltos de línea, en que produce una doble barra al
final de la línea y una repetición izquierda (de comienzo) al
principio de la línea siguiente.

@lilypond[quote,relative=2,verbatim]
c4 c c c
\bar ".|:-||"
c4 c c c \break
\bar ".|:-||"
c4 c c c
@end lilypond

Para combinaciones de repeticiones con el símbolo de segno,
existen seis variantes diferentes:

@lilypond[quote,relative=2,verbatim]
c4 c c c
\bar ":|.S"
c4 c c c \break
\bar ":|.S"
c4 c c c
\bar ":|.S-S"
c4 c c c \break
\bar ":|.S-S"
c4 c c c
\bar "S.|:-S"
c4 c c c \break
\bar "S.|:-S"
c4 c c c
\bar "S.|:"
c4 c c c \break
\bar "S.|:"
c4 c c c
\bar ":|.S.|:"
c4 c c c \break
\bar ":|.S.|:"
c4 c c c
\bar ":|.S.|:-S"
c4 c c c \break
\bar ":|.S.|:-S"
c1
@end lilypond

Además, existe una instrucción @code{\inStaffSegno} que crea un
símbolo de segno, situado en colaboración con la instrucción
@code{\repeat volta}.

@funindex \defineBarLine
@funindex defineBarLine
@cindex compás, definir líneas de
@cindex definir líneas de compás

Se pueden definir tipos nuevos de líneas divisorias con
@code{\defineBarLine}:

@example
\defineBarLine @var{tipo_de_barra} #'(@var{final} @var{comienzo} @var{extensión})
@end example

Las variables de @code{\defineBarline} pueden incluir la cadena de
caracteres @q{vacía} @code{""}, que equivale a imprimir una línea
divisoria invisible.  También se puede establecer al valor falso
@code{#f} que no imprime línea divisoria alguna.

Después de la definición, la nueva línea divisoria se puede
utilizar mediante @code{\bar} @var{tipo_de_barra}.

Actualmente están disponibles diez elementos de barra de compás:

@lilypond[quote,verbatim]
\defineBarLine ":" #'("" ":" "")
\defineBarLine "=" #'("=" "" "")
\defineBarLine "[" #'("" "[" "")
\defineBarLine "]" #'("]" "" "")

\new Staff {
  s1 \bar "|"
  s1 \bar "."
  s1 \bar "!"
  s1 \bar ";"
  s1 \bar ":"
  s1 \bar "k"
  s1 \bar "S"
  s1 \bar "="
  s1 \bar "["
  s1 \bar "]"
  s1 \bar ""
}
@end lilypond

La línea divisoria @code{"="} proporciona la barra de doble
extensión, usada en combinación con el símbolo de segno.  No lo
use como una doble línea divisoria fina aislada; para ello es
preferible @code{\bar} @var{"||"}.

El signo @code{"-"} inicia anotaciones a las barras de compás, que
son útiles para distinguir entre aquellas que tienen idéntica
apariencia pero distinto comportamiento en los saltos de línea y/o
diferentes barras de extensión.  La parque que sigue al signo
@code{"-"} no se usa para construir la barra de compás.

@lilypond[quote,relative=2,verbatim]
\defineBarLine "||-dashedSpan" #'("||" "" "!!")

\new StaffGroup <<
  \new Staff {
    c1 \bar "||"
    c1 \bar "||-dashedSpan"
    c1
  }
  \new Staff {
    c1
    c1
    c1
  }
>>
@end lilypond

Además, el carácter del espacio en blanco @code{" "} sirve como
contenedor para definir barras de extensión correctamente
alineadas a las barras principales:

@lilypond[quote,relative=2,verbatim]
\defineBarLine ":|.-wrong" #'(":|." "" "|.")
\defineBarLine ":|.-right" #'(":|." "" " |.")

\new StaffGroup <<
  \new Staff {
    c1 \bar ":|.-wrong"
    c1 \bar ":|.-right"
    c1
  }
  \new Staff {
    c1
    c1
    c1
  }
>>
@end lilypond

Si se necesitan elementos adicionales, LilyPond provee una forma
sencilla de definirlos.  Para ver más información sobre cómo
modificar o añadir barras de compás, consulte el archivo
@file{scm/bar-line.scm}.

En las partituras con muchos pentagramas, una instrucción @code{\bar}
en uno de ellos se aplica automáticamente a todos los demás.  Las
líneas resultantes se conectan entre los distintos pentagramas de un
@code{StaffGroup}, @code{PianoStaff} o @code{GrandStaff}.

@lilypond[quote,relative=1,verbatim]
<<
  \new StaffGroup <<
    \new Staff {
      e4 d
      \bar "||"
      f4 e
    }
    \new Staff { \clef bass c4 g e g }
  >>
  \new Staff { \clef bass c2 c2 }
>>
@end lilypond

@cindex predeterminada, línea divisoria, cambiar
@cindex línea divisoria predeterminada, cambiar

@funindex whichBar
@funindex defaultBarType
@funindex \bar
@funindex bar
@funindex bartype

La instrucción @samp{\bar @var{tipo de barra}} es una forma corta de
hacer @samp{\set Timing.whichBar = @var{tipo de barra}}.  Cuando
@code{whichBar} se establece con el valor de una cadena, se crea una
línea divisoria de ese tipo.

El tipo de barra predeterminado que se usa para las líneas divisorias
insertadas automáticamente es @code{"|"}.  Se puede cambiar en
cualquier momento con
@samp{\set Timing.defaultBarType = @var{tipo de barra}}.

@seealso
Referencia de la notación:
@ref{Saltos de línea},
@ref{Repeticiones},
@ref{Agrupar pentagramas}.

Archivos instalados:
@file{scm/bar-line.scm}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{BarLine} (creada al nivel de @code{Staff} (pentagrama)),
@rinternals{SpanBar} (a través de los pentagramas),
@rinternals{Timing_translator} (para las propiedades del contador de tiempo Timing).


@node Numeración de compases
@unnumberedsubsubsec Numeración de compases
@translationof Bar numbers

@cindex compás, números de
@cindex números de compás

@funindex currentBarNumber

Por defecto, los números de compás se imprimen al principio de la
línea, excepto la primera.  El número propiamente dicho se almacena en
la propiedad @code{currentBarNumber}, que normalmente se actualiza
automáticamente para cada compás.  También se puede establecer
manualmente:

@lilypond[verbatim,quote,relative=1]
c1 c c c
\break
\set Score.currentBarNumber = #50
c1 c c c
@end lilypond

@cindex números de compás, espaciado regular

@funindex barNumberVisibility
@funindex BarNumber

Los números de compás se pueden tipografiar a intervalos regulares en
vez de al principio de cada línea.  Para hacerlo se debe sobreescribir
el comportamiento predeterminado de forma que se puedan imprimir en
otros lugares.  Esto viene controlado por la propiedad
@code{break-visibility} de @code{BarNumber}.  Toma tres valores que se
pueden fijar al valor @code{#t} o @code{#f} para especificar si el
número de compás correspondiente es visible o no.  El orden de los
tres valores es @code{visible al final de la línea}, @code{visible en
mitad de la línea}, @code{visible al principio de la línea}.  En el
ejemplo siguiente se imprimen los números de compás en todos los
sitios posibles:

@lilypond[verbatim,quote,relative=1]
\override Score.BarNumber.break-visibility = #'#(#t #t #t)
\set Score.currentBarNumber = #11
% Permit first bar number to be printed
\bar ""
c1 | c | c | c
\break
c1 | c | c | c
@end lilypond

@snippets
@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{printing-the-bar-number-for-the-first-measure.ly}

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{printing-bar-numbers-at-regular-intervals.ly}

@cindex compás, número de, formato
@cindex número de compases, formato de

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{printing-bar-numbers-inside-boxes-or-circles.ly}

@cindex compás, número, con letras
@cindex compás, número, con repeticiones

@lilypondfile[verbatim,quote,texidoc,doctitle]
{alternative-bar-numbering.ly}

@cindex compás, número, alineación

@lilypondfile[verbatim,quote,texidoc,doctitle]
{aligning-bar-numbers.ly}

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{removing-bar-numbers-from-a-score.ly}

@seealso
Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{BarNumber},
@rinternals{Bar_number_engraver}.

@cindex número de compás, colisión
@cindex colisión del número de compás

@knownissues
Los números de compás pueden colisionar con el corchete
@code{StaffGroup}, si hay uno en la parte de arriba.  Para
solucionarlo, se puede usar la propiedad de relleno @code{padding} de
@code{BarNumber} para colocar el número correctamente.
Consulte @rinternals{StaffGroup} y @rinternals{BarNumber}
para ver más información.


@node Comprobación de compás y de número de compás
@unnumberedsubsubsec Comprobación de compás y de número de compás
@translationof Bar and bar number checks

@cindex compás, comprobación de
@cindex número de compás, comprobación de
@cindex compás, comprobación
@cindex compás, número, comprobación

@funindex barCheckSynchronize
@funindex |

Las comprobaciones de compás ayudan a detectar errores en las
duraciones.  Una comprobación de compás se escribe usando el símbolo
de la barra vertical, @code{|}, en cualquier lugar donde se espera que
caiga una línea divisoria.  Si se encuentran líneas de comprobación de
compás en otros lugares, se imprime una lista de advertencias en el
archivo log de registro, mostrando los números de línea y columna en
que han fallado las comprobaciones de compás.  En el siguiente
ejemplo, la segunda comprobación de compás avisará de un error

@example
\time 3/4 c2 e4 | g2 |
@end example

Las comprobaciones de compás también se pueden usar en la letra de las
canciones:

@example
\lyricmode @{
  \time 2/4
  Bri -- lla, | bri -- lla, |
@}
@end example

Las duraciones incorrectas a menudo desbaratan la partitura
completamente, sobre todo si la música es polifónica, por ello el
mejor sitio para empezar a corregir la entrada es hacer un barrido en
busca de comprobaciones de compás fallidas y duraciones incorrectas.

Si varias comprobaciones de compás corresponden al mismo intervalo
musical, sólo se imprime el primer mensaje de advertencia.  Esto
permite que la advertencia se centre en la fuente del error de cuenta
de tiempo.

@funindex |
@funindex "|"

También es posible redefinir la acción que se lleva a cabo cuando se
encuentra una barra vertical o símbolo de comprobación de compás,
@code{|}, en el código de entrada, de forma que haga algo distinto a
una comprobación de compás.  Se hace asignando una expresión musical a
@code{"|"}, el símbolo de barra vertical.  En el ejemplo siguiente se
establece @code{|} de forma que inserte una doble línea divisoria
cuando aparece en el código de entrada, en vez de comprobar el final
de un compás.

@lilypond[quote,verbatim]
"|" = \bar "||"
{
  c'2 c' |
  c'2 c'
  c'2 | c'
  c'2 c'
}
@end lilypond

@funindex \barNumberCheck
@funindex barNumberCheck

Al copiar piezas musicales grandes puede servir de ayuda comprobar que
el número de compás de LilyPond corresponde al original desde el que
está copiando.  Esto se puede comprobar con @code{\barNumberCheck},
por ejemplo:

@verbatim
\barNumberCheck #123
@end verbatim

@noindent
imprime una advertencia si el @code{currentBarNumber} (número del
compás actual) no es el 123 en el momento de la compilación.

@seealso
Fragmentos de código:
@rlsr{Rhythms}.


@node Llamadas de ensayo
@unnumberedsubsubsec Llamadas de ensayo
@translationof Rehearsal marks

@cindex ensayo, letras de
@cindex letras de ensayo

@funindex \mark
@funindex mark

Para imprimir una letra de ensayo, utilice la orden @code{\mark}.

@lilypond[quote,verbatim,relative=2]
c1 \mark \default
c1 \mark \default
c1 \mark \default
c1 \mark \default
@end lilypond

@noindent
La letra de ensayo se incrementa automáticamente si usa @code{\mark
\default}, pero también puede utilizar un número entero como argumento
para establecer la indicación manualmente.  El valor que se utilizará
se almacena dentro de la propiedad @code{rehearsalMark}.

@lilypond[quote,verbatim,relative=2]
c1 \mark \default
c1 \mark \default
c1 \mark #8
c1 \mark \default
c1 \mark \default
@end lilypond

@noindent
La letra@tie{}@q{I} se salta de acuerdo con las tradiciones de
grabado.  Si quiere incluir la letra @q{I}, use una de las
instrucciones siguientes, según el estilo de marcas de
ensayo que desee (sólo letras, letras dentro de un rectángulo
o letras dentro de un círculo).

@example
\set Score.markFormatter = #format-mark-alphabet
\set Score.markFormatter = #format-mark-box-alphabet
\set Score.markFormatter = #format-mark-circle-alphabet
@end example

@lilypond[quote,verbatim,relative=2]
\set Score.markFormatter = #format-mark-box-alphabet
c1 \mark \default
c1 \mark \default
c1 \mark #8
c1 \mark \default
c1 \mark \default
@end lilypond

@cindex ensayo, letra de, formato
@cindex ensayo, letra de, estilo
@cindex estilo de la letra de ensayo
@cindex formato de la letra de ensayo
@cindex letra de ensayo, estilo
@cindex letra de ensayo, formato
@cindex marca de ensayo, estilo
@cindex marca de ensayo, formato
@cindex ensayo, letra de, manual
@cindex marca de ensayo manual
@cindex personalizada, marca de ensayo
@cindex manual, marca de ensayo

El estilo se define por medio de la propiedad @code{markFormatter}.
Es una función que toma como argumentos la marca en curso (un número
entero) y el contexto actual.  Debe devolver un objeto de marcado.  En
el ejemplo siguiente, se establece @code{markFormatter} con el valor
de un procedimiento enlatado.  Después de algunos compases, se
establece con el valor de una función que produce un número encerrado
en una caja.

@lilypond[quote,verbatim,relative=2]
\set Score.markFormatter = #format-mark-numbers
c1 \mark \default
c1 \mark \default
\set Score.markFormatter = #format-mark-box-numbers
c1 \mark \default
\set Score.markFormatter = #format-mark-circle-numbers
c1 \mark \default
\set Score.markFormatter = #format-mark-circle-letters
c1
@end lilypond

El archivo @file{scm/translation-functions.scm} contiene las
definiciones de @code{format-mark-numbers} (el formato por omisión),
@code{format-mark-box-numbers}, @code{format-mark-letters} y
@code{format-mark-box-letters}.  Se pueden usar éstos como inspiración
para otras funciones de formateo.

Podemos utilizar @code{format-mark-barnumbers},
@code{format-mark-box-barnumbers} y
@code{format-mark-circle-barnumbers} para obtener números de compás en
lugar de números o letras secuenciales.

Se pueden especificar otros estilos de letra de ensayo de forma
manual:

@example
\mark "A1"
@end example

@noindent
Observe que @code{Score.markFormatter} no afecta a las marcas que se
especifican de esta forma.  Sin embargo, es posible aplicar un
elemento @code{\markup} a la cadena.

@example
\mark \markup@{ \box A1 @}
@end example

@cindex segno
@cindex coda
@cindex D.S. al Fine
@cindex calderón
@cindex musicales, glifos
@cindex glifos musicales

@funindex \musicglyph
@funindex musicglyph

Los glifos musicales (como el segno) se pueden imprimir dentro de un
elemento @code{\mark}

@lilypond[quote,verbatim,relative=1]
c1 \mark \markup { \musicglyph #"scripts.segno" }
c1 \mark \markup { \musicglyph #"scripts.coda" }
c1 \mark \markup { \musicglyph #"scripts.ufermata" }
c1
@end lilypond

@noindent
Consulte @ref{La tipografía Feta} para ver una lista de los símbolos que se
pueden imprimir con @code{\musicglyph}.

Para ver formas comunes de trucar la colocación de las letras de
ensayo, consulte @ref{Formatear el texto}.  Para un control más
preciso, consulte @code{break-alignable-interface} en la sección
@ref{Alineación de objetos}.

El archivo @file{scm/translation-functions.scm} contiene las
definiciones de @code{format-mark-numbers} y de
@code{format-mark-letters}.  Se pueden utilizar como inspiración para
escribir otras funciones de formateo.

@seealso
Referencia de la notación:
@ref{La tipografía Feta},
@ref{Formatear el texto},
@ref{Alineación de objetos}.

Archivos de inicio:
@file{scm/translation-functions.scm}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{MarkEvent},
@rinternals{Mark_engraver},
@rinternals{RehearsalMark}.


@node Asuntos rítmicos especiales
@subsection Asuntos rítmicos especiales
@translationof Special rhythmic concerns

@menu
* Notas de adorno::
* Alinear con una cadenza::
* Gestión del tiempo::
@end menu

@node Notas de adorno
@unnumberedsubsubsec Notas de adorno
@translationof Grace notes

@cindex ornamentos
@cindex mordentes
@cindex appoggiatura
@cindex acciaccatura

@funindex \grace
@funindex \slashedGrace
@funindex \acciaccatura
@funindex \appoggiatura

Los mordentes y notas de adorno son ornamentos musicales,
impresos en un tipo más pequeño y no ocupan ningún
tiempo lógico adicional en el compás.

@lilypond[quote,relative=2,verbatim]
c4 \grace b16 a4(
\grace { b16 c16 } a2)
@end lilypond

Hay otros tres tipos posibles de notas de adorno; la
@emph{acciaccatura} o mordente de una nota (una nota de adorno sin
medida que se indica mediante una nota ligada y con el
corchete tachado) y la @emph{appoggiatura}, que toma una fracción fija
de la nota principal a la que se adjunta, y que se imprime sin
tachar.  Es posible escribir una nota de adorno con la plica
tachada, como la @emph{acciaccatura} pero sin la ligadura, como para
colocarla entre notas que están ligadas entre sí, utilizando la función
@code{\slashedGrace}.

@lilypond[quote,relative=2,verbatim]
\acciaccatura d8 c4
\appoggiatura e8 d4
\acciaccatura { g16 f } e2
\slashedGrace a,8 g4
\slashedGrace b16 a4(
\slashedGrace b8 a2)
@end lilypond

La colocación de notas de adorno se sincroniza entre los distintos
pentagramas.  En el siguiente ejemplo, hay dos semicorcheas de adorno
por cada corchea de adorno:

@lilypond[quote,relative=2,verbatim]
<<
  \new Staff { e2 \grace { c16 d e f } e2 }
  \new Staff { c2 \grace { g8 b } c2 }
>>
@end lilypond

@cindex adorno, seguimiento de notas de

@funindex \afterGrace
@funindex afterGrace

Si queremos terminar una nota con un adorno, usamos la instrucción
@code{\afterGrace}.  Toma dos argumentos: la nota principal, y las
notas de adorno que siguen a la nota principal.

@lilypond[quote,verbatim,relative=2]
c1 \afterGrace d1 { c16[ d] } c1
@end lilypond

Esto pone las notas de adorno después de un espacio que dura 3/4 de la
longitud de la nota principal.  La fracción predeterminada de 3/4 se
puede cambiar estableciendo @code{afterGraceFraction}.  El ejemplo
siguiente muestra el resultado de establecer el espacio en su valor
predeterminado, en 15/16, y por último en 1/2 de la nota principal.

@lilypond[quote,verbatim,relative=2]
<<
  \new Staff {
    c1 \afterGrace d1 { c16[ d] } c1
  }
  \new Staff {
    #(define afterGraceFraction (cons 15 16))
    c1 \afterGrace d1 { c16[ d] } c1
  }
  \new Staff {
    #(define afterGraceFraction (cons 1 2))
    c1 \afterGrace d1 { c16[ d] } c1
  }
>>
@end lilypond

El espacio entre la nota principal y la de adorno también se puede
especificar usando espaciadores.  El ejemplo siguiente sitúa
la nota de adorno después de un espacio que dura 7/8 de la
nota principal.

@lilypond[quote,verbatim,relative=2]
\new Voice {
  <<
    { d1^\trill_( }
    { s2 s4. \grace { c16 d } }
  >>
  c1)
}
@end lilypond

@cindex trucaje de las notas de adorno
@cindex notas de adorno, trucar
@cindex notas de adorno, cambiar los ajustes de disposición

Una expresión musical @code{\grace} introduce ajustes de tipografía
especiales, por ejemplo para producir un tipo más pequeño y para fijar
las direcciones.  Por ello, cuando se introducen trucos para la
presentación, deben ir dentro de la expresión de adorno. Las
sobreescrituras se deben también revertir dentro de la expresión de
adorno. Aquí, la dirección predeterminada de la plica de la nota de
adorno se sobreescribe y luego se revierte.

@lilypond[quote,verbatim,relative=2]
\new Voice {
  \acciaccatura {
    \stemDown
    f16->
    \stemNeutral
  }
  g4 e c2
}
@end lilypond

@cindex plica cruzada

@snippets
@lilypondfile[verbatim,quote,texidoc,doctitle]
{using-grace-note-slashes-with-normal-heads.ly}

@lilypondfile[verbatim,quote,texidoc,doctitle]
{tweaking-grace-layout-within-music.ly}

@lilypondfile[verbatim,quote,texidoc,doctitle]
{redefining-grace-note-global-defaults.ly}

@lilypondfile[verbatim,quote,texidoc,doctitle]
{positioning-grace-notes-with-floating-space.ly}

@seealso
Glosario musical:
@rglos{grace notes},
@rglos{acciaccatura},
@rglos{appoggiatura}.

Referencia de la notación:
@ref{Escalar las duraciones},
@ref{Barras manuales}.

Archivos de inicio:
@file{ly/grace-init.ly}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{GraceMusic},
@rinternals{Grace_beam_engraver},
@rinternals{Grace_auto_beam_engraver},
@rinternals{Grace_engraver},
@rinternals{Grace_spacing_engraver}.


@knownissues
@cindex acciaccatura de varias notas
@cindex adorno, sincronización de notas de

Una @i{acciaccatura} de varias notas con una barra se imprime sin
tachar, y tiene exactamente la misma apariencia que una
@i{appoggiatura} de varias notas con barra.

@c TODO Add link to LSR snippet to add slash when available

La sincronización de las notas de adorno también puede acarrear
sorpresas.  La notación de pentagramas, como armaduras, líneas
divisorias, etc., se sincronizan también.  Ponga cuidado cuando mezcle
pentagramas con adornos y sin adornos, por ejemplo

@lilypond[quote,relative=2,verbatim]
<<
  \new Staff { e4 \bar ".|:" \grace c16 d2. }
  \new Staff { c4 \bar ".|:" d2. }
>>
@end lilypond

@noindent
Esto se puede remediar insertando desplazamientos de adorno de las
duraciones correspondientes en los otros pentagramas.  Para el ejemplo
anterior

@lilypond[quote,relative=2,verbatim]
<<
  \new Staff { e4 \bar ".|:" \grace c16 d2. }
  \new Staff { c4 \bar ".|:" \grace s16 d2. }
>>
@end lilypond

El uso de notas de adorno dentro de los contextos de voz tiende
a confundir la manera en que se tipografía la voz.
Esto se puede soslayar mediante la inserción de un silencio o nota
entre la instrucción de voz y la nota de adorno.

@lilypond[quote,verbatim]
accMusic = {
  \acciaccatura { f8 } e8 r8 \acciaccatura { f8 } e8 r4
}

\new Staff {
  <<
    \new Voice {
      \relative c'' {
        r8 r8 \voiceOne \accMusic \oneVoice r8 |
        r8 \voiceOne r8 \accMusic \oneVoice r8 |
      }
    }
    \new Voice {
      \relative c' {
        s8 s8 \voiceTwo \accMusic \oneVoice s8 |
        s8 \voiceTwo r8 \accMusic \oneVoice s8 |
      }
    }
  >>
}
@end lilypond

Las secciones de adorno sólo se deben usar dentro de expresiones de
música secuenciales.  No están contemplados el anidado ni la
yuxtaposición de secciones de adorno, y podría producir caídas u otros
errores.

Cada nota de adorno en la salida MIDI tiene una longitud que es 1/4 de
su duración real.  Si la duración combinada de las notas de adorno es
mayor que la longitud de la nota precedente, se genera un error
@qq{@code{Retrocediendo en el tiempo MIDI}}.  Tiene dos opciones: en
primer lugar, puede hacer más corta la duración de las notas de
adorno, por ejemplo:

@example
c'8 \acciaccatura @{ c'8[ d' e' f' g'] @}
@end example

se convierte en:

@example
c'8 \acciaccatura @{ c'16[ d' e' f' g'] @}
@end example

Otra opción es cambiar explícitamente la duración musical:

@example
c'8 \acciaccatura @{ \scaleDurations 1/2 @{ c'8[ d' e' f' g'] @} @}
@end example

Véase @ref{Escalar las duraciones}.


@node Alinear con una cadenza
@unnumberedsubsubsec Alinear con una cadenza
@translationof Aligning to cadenzas

@cindex cadenza (cadencia)
@cindex cadenza (cadencia), alinear a
@cindex alineación a una cadenza (cadencia)

En un contexto orquestal, las cadenzas presentan un problema especial:
al construir una partitura que tiene una cadenza, todos los demás
instrumentos deben saltar tantas notas como la longitud de la cadenza,
pues en caso contrario empezarán demasiado pronto o demasiado tarde.

Una solución a este problema son las funciones @code{mmrest-of-length}
y @code{skip-of-length}.  Estas funciones de Scheme toman un fragmento
de música como argumento y generan un @code{\skip} o silencio
multicompás, de la longitud exacta del fragmento.

@lilypond[verbatim,quote]
MyCadenza = \relative c' {
  c4 d8 e f g g4
  f2 g4 g
}

\new GrandStaff <<
  \new Staff {
    \MyCadenza c'1
    \MyCadenza c'1
  }
  \new Staff {
    #(mmrest-of-length MyCadenza)
    c'1
    #(skip-of-length MyCadenza)
    c'1
  }
>>
@end lilypond

@seealso
Glosario musical:
@rglos{cadenza}.

Fragmentos de código:
@rlsr{Rhythms}.


@node Gestión del tiempo
@unnumberedsubsubsec Gestión del tiempo
@translationof Time administration

@cindex tiempo, administración
@cindex tiempo, control del (dentro de la partitura)
@cindex música sin medida
@cindex medida, música sin

@funindex currentBarNumber
@funindex measurePosition
@funindex measureLength

El tiempo está administrado por el @code{Timing_translator}, que de
forma predeterminada vive en el contexto de @code{Score}.  Se añade un
alias, @code{Timing}, al contexto en que se coloca el
@code{Timing_translator}.
Para asegurar que está disponible el alias @code{Timing}, quizá
tenga que crear explícitamente una instancia del contexto
contenedor (como @code{Voice} o @code{Staff}).

Se usan las siguientes propiedades de @code{Timing} para seguir la
pista del tiempo dentro de la partitura.

@cindex compás, número de
@cindex número de compás

@table @code
@item currentBarNumber
El número de compás en curso.  Para ver un ejemplo que muestra el uso
de esta propiedad, consulte @ref{Numeración de compases}.

@item measureLength
La longitud de los compases dentro de la indicación actual de compás.
Para un 4/4 esto es@tie{}1, y para el 6/8 es 3/4.  Su valor determinad
cuándo se insertan las líneas divisorias y cómo se generan las barras
automáticas.

@item measurePosition
El punto en que nos encontramos dentro del compás.  Esta cantidad se
reinicia sustrayendo @code{measureLength} cada vez que se alcanza o se
excede @code{measureLength}.  Cuando eso ocurre, se incrementa
@code{currentBarNumber}.

@item timing
Si tiene un valor verdadero, las variables anteriores se actualizan a
cada paso de tiempo.  Cuando tiene un valor falso, el grabador se
queda en el compás actual indefinidamente.

@end table

La cuenta del tiempo se puede cambiar estableciendo el valor de
cualquiera de estas variables explícitamente.  En el siguiente
ejemplo, se imprime la indicación de compás predeterminada 4/4, pero
@code{measureLength} tiene está ajustado a 5/4.  En los 4/8 hasta el
tercer compás, la posición @code{measurePosition} se adelanta en 1/8
hasta 5/8, acortando ese compás en 1/8.  Entonces, la siguiente línea
divisoria cae en 9/8 en vez de hacerlo en 5/4.

@lilypond[quote,verbatim]
\new Voice \relative c' {
  \set Timing.measureLength = #(ly:make-moment 5/4)
  c1 c4 |
  c1 c4 |
  c4 c
  \set Timing.measurePosition = #(ly:make-moment 5/8)
  b4 b b8 |
  c4 c1 |
}
@end lilypond

@noindent
Como lo ilustra el ejemplo, @code{ly:make-moment n m} construye una
duración de la fracción n/m de una redonda.  Por ejemplo,
@code{ly:make-moment 1 8} es una duración de una corchea y
@code{ly:make-moment 7 16} es la duración de siete semicorcheas.

@seealso
Referencia de la notación:
@ref{Numeración de compases},
@ref{Música sin compasear}.

Fragmentos de código:
@rlsr{Rhythms}.

Referencia de funcionamiento interno:
@rinternals{Timing_translator},
@rinternals{Score}.
