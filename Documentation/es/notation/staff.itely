@c -*- coding: utf-8; mode: texinfo; documentlanguage: es -*-
@ignore
    Translation of GIT committish: 6e4e9c4eacb94d68c11fd6b9062da4f724114860

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  For details, see the Contributors'
    Guide, node Updating translation committishes..
@end ignore

@c \version "2.19.2"

@node Notación de los pentagramas
@section Notación de los pentagramas
@translationof Staff notation

@c The line width is a bit of a hack to allow space for the
@c  instrument names.
@lilypondfile[quote,ragged-right,line-width=14.5\cm,staffsize=16]{staff-headword.ly}

Esta sección explica cómo influir sobre la apariencia de los
pentagramas, cómo imprimir partituras con más de un pentagrama y cómo
añadir indicaciones de tempo y notas guía a los pentagramas.

@menu
* Impresión de los pentagramas::
* Modificación de pentagramas sueltos::
* Escritura de las particellas::
@end menu


@node Impresión de los pentagramas
@subsection Impresión de los pentagramas
@translationof Displaying staves

Esta sección describe los distintos métodos de creación de pentagramas
y grupos de ellos.

@menu
* Crear instancias de pentagramas nuevos::
* Agrupar pentagramas::
* Grupos de pentagramas anidados::
* Separación de sistemas::
@end menu


@node Crear instancias de pentagramas nuevos
@unnumberedsubsubsec Crear instancias de pentagramas nuevos
@translationof Instantiating new staves

@cindex nuevo pentagrama
@cindex pauta
@cindex pentagrama, iniciar
@cindex pentagrama, instanciar
@cindex pentagrama, nuevo
@cindex pentagrama de percusión
@cindex pentagrama único
@cindex percusión, pauta de
@cindex pauta de percusión
@cindex gregoriano, canto, pauta de transcripción de
@cindex rítmica, pauta
@cindex tablatura, pauta de

@funindex \drummode
@funindex drummode
@funindex DrumStaff
@funindex RhythmicStaff
@funindex TabStaff
@funindex MensuralStaff
@funindex VaticanaStaff
@funindex GregorianTranscriptionStaff

Las @notation{pautas} y los @notation{pentagramas} o pautas de cinco
líneas se crean con las instrucciones @code{\new} o @code{\context}.
Para ver más detalles, consulte @ref{Crear y referenciar contextos}.

El contexto básico de pentagrama es @code{Staff}:

@lilypond[verbatim,quote,relative=2]
\new Staff { c4 d e f }
@end lilypond

El contexto @code{DrumStaff} crea una pauta de cinco líneas preparada
para un conjunto de batería típico.  Cada instrumento se presenta con
un símbolo distinto.  Los instrumentos se escriben en el modo de
percusión que sigue a una instrucción @code{\drummode}, con cada
instrumento identificado por un nombre.  Para ver más detalles,
consulte @ref{Pautas de percusión}.

@lilypond[verbatim,quote]
\new DrumStaff {
  \drummode { cymc hh ss tomh }
}
@end lilypond

@code{RhythmicStaff} crea una pauta de una sola línea que sólo muestra
las duraciones de la entrada.  Se preservan las duraciones reales.
Para ver más detalles, consulte @ref{Mostrar los ritmos de la melodía}.

@lilypond[verbatim,quote,relative=2]
\new RhythmicStaff { c4 d e f }
@end lilypond

@code{TabStaff} crea una tablatura con seis cuerdas en la afinación
estándar de guitarra.  Para ver más detalles, consulte @ref{Tablaturas predeterminadas}.

@lilypond[verbatim,quote,relative=2]
\new TabStaff { c4 d e f }
@end lilypond

Existen dos contextos de pauta específicos para la notación de música
antigua: @code{MensuralStaff} y @code{VaticanaStaff}.  Se describen en
@ref{Contextos predefinidos}.

@code{GregorianTranscriptionStaff} crea una pauta para la notación
moderna de canto gregoriano.  No muestra líneas divisorias.

@lilypond[verbatim,quote,relative=2]
\new GregorianTranscriptionStaff { c4 d e f e d }
@end lilypond

Se pueden definir contextos nuevos de pentagrama único.  Para ver más
detalles, consulte @ref{Definir contextos nuevos}.

@seealso
Glosario musical:
@rglos{staff},
@rglos{staves}.

Referencia de la notación:
@ref{Crear y referenciar contextos},
@ref{Pautas de percusión},
@ref{Mostrar los ritmos de la melodía},
@ref{Tablaturas predeterminadas},
@ref{Contextos predefinidos},
@ref{El símbolo del pentagrama},
@ref{Contextos del canto gregoriano},
@ref{Contextos de la música mensural},
@ref{Definir contextos nuevos}.

Fragmentos de código:
@rlsr{Staff notation}.

Referencia de funcionamiento interno:
@rinternals{Staff},
@rinternals{DrumStaff},
@rinternals{GregorianTranscriptionStaff},
@rinternals{RhythmicStaff},
@rinternals{TabStaff},
@rinternals{MensuralStaff},
@rinternals{VaticanaStaff},
@rinternals{StaffSymbol}.


@node Agrupar pentagramas
@unnumberedsubsubsec Agrupar pentagramas
@translationof Grouping staves

@cindex comienzo del sistema
@cindex pentagramas, varios
@cindex corchete vertical
@cindex llave vertical
@cindex pentagramas de piano
@cindex pentagramas, grupo de
@cindex pauta de coro
@cindex sistema, delimitador de comienzo
@cindex coro, sistema de
@cindex piano, sistema de
@cindex piano, pentagramas de
@cindex sistema de piano
@cindex sistema de coro
@cindex sistema

Existen varios contextos para agrupar pentagramas individuales
formando sistemas.  Cada contexto de agrupación establece el estilo
del delimitador de comienzo del sistema y el comportamiento de las
barras de compás.

Si no se especifica ningún contexto, se usan las propiedades
predeterminadas: el grupo comienza con una línea vertical y las barras
de compás no están conectadas.

@lilypond[verbatim,quote,relative=2]
<<
  \new Staff { c1 c }
  \new Staff { c1 c }
>>
@end lilypond

En el contexto @code{StaffGroup}, el grupo se inicia con un corchete y
las barras de compás se dibujan atravesando todos los pentagramas.

@lilypond[verbatim,quote,relative=2]
\new StaffGroup <<
  \new Staff { c1 c }
  \new Staff { c1 c }
>>
@end lilypond

En un @code{ChoirStaff} (sistema de coro), el grupo se inicia con un
corchete, pero las barras de compás no están conectadas.

@lilypond[verbatim,quote,relative=2]
\new ChoirStaff <<
  \new Staff { c1 c }
  \new Staff { c1 c }
>>
@end lilypond

En un @code{GrandStaff} (sistema de piano), el grupo se inicia con una
llave y las barras de compás se conectan entre los pentagramas.

@lilypond[verbatim,quote,relative=2]
\new GrandStaff <<
  \new Staff { c1 c }
  \new Staff { c1 c }
>>
@end lilypond

El @code{PianoStaff} (sistema de piano) es idéntico a
@code{GrandStaff}, excepto que contempla directamente la impresión del
nombre del instrumento.  Para ver más detalles, consulte
@ref{Nombres de instrumentos}.

@lilypond[verbatim,quote,relative=2]
\new PianoStaff <<
  \set PianoStaff.instrumentName = #"Piano"
  \new Staff { c1 c }
  \new Staff { c1 c }
>>
@end lilypond

Cada contexto de grupo de pentagramas fija la propiedad del
delimitador de inicio @code{systemStartDelimiter} a uno de los
siguientes valores: @code{SystemStartBar} (línea),
@code{SystemStartBrace} (llave) o @code{SystemStartBracket}
(corchete).  También está disponible un cuarto delimitador,
@code{SystemStartSquare} (corchete en ángulo recto), pero se debe
especificar explícitamente.

Se pueden definir contextos nuevos de grupo de pentagramas.  Para ver
más detalles, consulte @ref{Definir contextos nuevos}.

@snippets
@lilypondfile[verbatim,quote,texidoc,doctitle]
{use-square-bracket-at-the-start-of-a-staff-group.ly}

@lilypondfile[verbatim,quote,texidoc,doctitle]
{display-bracket-with-only-one-staff-in-a-system.ly}

@cindex diseño «mensurstriche»
@cindex mensurstriche, diseño
@cindex renacimiento, música del
@cindex transcripción de música mensural
@cindex mensural, música, transcripción de

@lilypondfile[verbatim,quote,texidoc,doctitle]
{mensurstriche-layout-bar-lines-between-the-staves.ly}

@seealso
Glosario musical:
@rglos{brace},
@rglos{bracket},
@rglos{grand staff}.

Referencia de la notación:
@ref{Nombres de instrumentos},
@ref{Definir contextos nuevos}.

Fragmentos de código:
@rlsr{Staff notation}.

Referencia de funcionamiento interno:
@rinternals{Staff},
@rinternals{StaffGroup},
@rinternals{ChoirStaff},
@rinternals{GrandStaff},
@rinternals{PianoStaff},
@rinternals{SystemStartBar},
@rinternals{SystemStartBrace},
@rinternals{SystemStartBracket},
@rinternals{SystemStartSquare}.

@knownissues
@code{PianoStaff} no acepta @code{ChordNames} de forma predeterminada.


@node Grupos de pentagramas anidados
@unnumberedsubsubsec Grupos de pentagramas anidados
@translationof Nested staff groups

@cindex pentagramas anidados
@cindex anidamiento de pentagramas
@cindex sistema, delimitadores de inicio anidados
@cindex anidados, corchetes de pentagrama
@cindex corchetes anidados
@cindex llaves, anidado de

Los contextos de grupos de pentagramas se pueden anidar hasta una
profundidad arbitraria.  En este caso, cada contexto descendiente crea
un corchete nuevo adyacente al corchete de su grupo padre.

@lilypond[verbatim,quote,relative=2]
\new StaffGroup <<
  \new Staff { c2 c | c2 c }
  \new StaffGroup <<
    \new Staff { g2 g | g2 g }
    \new StaffGroup \with {
      systemStartDelimiter = #'SystemStartSquare
    }
    <<
      \new Staff { e2 e | e2 e }
      \new Staff { c2 c | c2 c }
    >>
  >>
>>
@end lilypond

Se pueden definir nuevos contextos de grupos de pentagramas anidados.
Para ver más detalles, consulte @ref{Definir contextos nuevos}.

@snippets
@lilypondfile[verbatim,quote,texidoc,doctitle]
{nesting-staves.ly}

@seealso
Referencia de la notación:
@ref{Agrupar pentagramas},
@ref{Nombres de instrumentos},
@ref{Definir contextos nuevos}.

Fragmentos de código:
@rlsr{Staff notation}.

Referencia de funcionamiento interno:
@rinternals{StaffGroup},
@rinternals{ChoirStaff},
@rinternals{SystemStartBar},
@rinternals{SystemStartBrace},
@rinternals{SystemStartBracket},
@rinternals{SystemStartSquare}.


@node Separación de sistemas
@unnumberedsubsubsec Separación de sistemas
@translationof Separating systems

@cindex separación de sistemas, marca de

Si el número de sistemas por página varía de una página a otra, es
costumbre separar los sistemas colocando una marca separadora entre
ellos.  De forma predeterminada, el separador de sistemas es nulo,
pero se puede activar con una opción de @code{\paper}.

@c \book is required here to display the system separator
@c ragged-right is required as there are two systems
@lilypond[verbatim,quote,ragged-right]
\book {
  \score {
    \new StaffGroup <<
      \new Staff {
        \relative c'' {
          c4 c c c
          \break
          c4 c c c
        }
      }
      \new Staff {
        \relative c'' {
          c4 c c c
          \break
          c4 c c c
        }
      }
    >>
  }
  \paper {
    system-separator-markup = \slashSeparator
    % following commands are needed only to format this documentation
    paper-width = 100\mm
    paper-height = 100\mm
    tagline = ##f
  }
}
@end lilypond

@seealso
Referencia de la notación:
@ref{Disposición de la página}.

Fragmentos de código:
@rlsr{Notación de los pentagramas}.


@node Modificación de pentagramas sueltos
@subsection Modificación de pentagramas sueltos
@translationof Modifying single staves

Esta sección explica cómo cambiar los atributos específicos de un
pentagrama: por ejemplo, cambiar el número de líneas o el tamaño de la
pauta.  También se describen los métodos para comenzar y terminar los
pentagramas, y establecer secciones de ossia.

@menu
* El símbolo del pentagrama::
* Pentagramas de Ossia::
* Ocultar pentagramas::
@end menu


@node El símbolo del pentagrama
@unnumberedsubsubsec El símbolo del pentagrama
@translationof Staff symbol

@cindex pentagrama, símbolo del
@cindex pentagrama, detener e inicial líneas del
@cindex pentagrama, mofidicar las líneas del
@cindex adicionales, líneas
@cindex adicionales internas, líneas
@cindex adicionales, modificar líneas
@cindex líneas del pentagrama
@cindex líneas adicionales

@funindex \startStaff
@funindex startStaff
@funindex \stopStaff
@funindex stopStaff

Se pueden usar las instrucciones @code{\stopStaff} y
@code{\startStaff} para detener y (re)iniciar, respectivamente, la
impresión de las líneas de la pauta en cualquier punto de la
partitura.

@lilypond[verbatim,quote,relative=2]
\stopStaff f4 d \startStaff g, e
f'4 d \stopStaff g, e
f'4 d \startStaff g, e
@end lilypond

@predefined
@code{\startStaff},
@code{\stopStaff}.
@endpredefined

Las líneas de la pauta pertenecen al grob @code{StaffSymbol}
(incluidas las líneas adicionales) y se pueden modificar usando las
propiedades de @code{StaffSymbol}, pero esas modificaciones deben
hacerse antes de que el pentagrama se (re)inicie.

Se puede cambiar el número de líneas de la pauta:

@lilypond[verbatim,quote,relative=2]
f4 d \stopStaff
\override Staff.StaffSymbol.line-count = #2
\startStaff g, e |

f'4 d \stopStaff
\revert Staff.StaffSymbol.line-count
\startStaff g, e |
@end lilypond

La posición de cada una de las líneas de la pauta también puede
cambiarse.  Una lista de números fija la posición de cada línea.
@code{0}@tie{}corresponde a la línea central normal, y las
posiciones normales de las líneas son
@code{(-4@tie{}-2@tie{}0@tie{}2@tie{}4)}.  Se imprime una sola
línea de pauta por cada valor que se introduce, de manera que el
número de líneas así como su posición en la pauta pueden cambiarse
con una sola operación de sobreescritura.

@lilypond[verbatim,quote,relative=2]
f4 d \stopStaff
\override Staff.StaffSymbol.line-positions = #'(1 3 5 -1 -3)
\startStaff g, e |
f'4 d \stopStaff
\override Staff.StaffSymbol.line-positions = #'(8 6.5 -6 -8 -0.5)
\startStaff g, e
@end lilypond

Para preservar las direcciones típicas de las plicas (hacia arriba
para la mitad inferior del pentagra y hacia abajo para la mitad
superior), debemos alinear la línea (o espacio) central de la
pauta personalizada con la posición de la línea central normal
(0).  Puede ser necesario un ajuste de la posición de la clave y
del Do@tie{}central para que se correspondan a las líneas nuevas.
Véase @ref{Clave}.

Puede cambiarse el grosor de las líneas de la pauta.  También resultan
afectadas, de forma predeterminada, las líneas adicionales y no la
plica de las figuras.

@lilypond[verbatim,quote,relative=2]
\new Staff \with {
  \override StaffSymbol.thickness = #3
}
{ f4 d g, e }
@end lilypond

También es posible fijar el grosor de las líneas adicionales de
forma independiente del de las líneas de la pauta.

@lilypond[verbatim,quote,relative=2]
\new Staff \with {
  \override StaffSymbol.thickness = #2
  \override StaffSymbol.ledger-line-thickness = #'(0.5 . 0.4)
}
{ f'4 a, a,, f }
@end lilypond

@noindent
El primer valor se multiplica por
el grosor de las líneas del pentagrama,
el segundo por el ancho de un espacio del pentagrama, y después
los dos valores se suman para obtener el grosor de
las líneas adicionales.

Se pueden alterar las posiciones de las líneas adicionales:

@lilypond[verbatim,quote,relative=2]
\new Staff \with {
  \override StaffSymbol.ledger-positions = #'(-3 -2 -1 2 5 6)
}
{ f'4 a, a,, f }
@end lilypond

Puede hacerse que las líneas adicionales añadidas aparezcan por encima
o por debajo de la cabeza de las figuras, dependiendo de la posición
actual relativa a otras cabezas de figura que tienen asimismo sus
propias líneas adicionales.

@lilypond[verbatim,quote,relative=2]
\new Staff \with {
  \override StaffSymbol.ledger-extra = #4
}
{ f'4 a, d, f, }
@end lilypond

También puede hacerse que las líneas adicionales aparezcan dentro del
pentagrama allí donde se requieren líneas de pauta personalizadas.  El
ejemplo muestra la posición predeterminada de las líneas adicionales
cuando el valor de posición explícito @code{ledger-position} se ha
fijado o no.  La instrucción @code{\stopStaff} se necesita en el
ejemplo para revertir la instrucción de sobreescritura
@code{\override} para todo el @code{StaffSymbol} (el símbolo de
pauta).

@lilypond[verbatim,quote,relative=1]
\override Staff.StaffSymbol.line-positions = #'(-8 0 2 4)
d4 e f g
\stopStaff
\startStaff
\override Staff.StaffSymbol.ledger-positions = #'(-8 -6 (-4 -2) 0)
d4 e f g
@end lilypond

Puede alterarse la distancia entre líneas de la pauta.  Esto afecta
también al espaciado de las líneas adicionales.

@lilypond[verbatim,quote,relative=2]
\new Staff \with {
  \override StaffSymbol.staff-space = #1.5
}
{ f'4 d, g, e, }
@end lilypond

@snippets
@lilypondfile[verbatim,quote,texidoc,doctitle]
{making-some-staff-lines-thicker-than-the-others.ly}

@seealso
Glosario musical:
@rglos{line},
@rglos{ledger line},
@rglos{staff}.

Referencia de la notación:
@ref{Clave}.

Fragmentos de código:
@rlsr{Staff notation}.

Referencia de funcionamiento interno:
@rinternals{StaffSymbol},
@rinternals{staff-symbol-interface}.


@node Pentagramas de Ossia
@unnumberedsubsubsec Pentagramas de Ossia
@translationof Ossia staves

@cindex pentagrama a la francesa
@cindex ossia
@cindex francesa, pentagramas a la
@cindex pauta, escalado de
@cindex escalado de pentagramas

@funindex \startStaff
@funindex startStaff
@funindex \stopStaff
@funindex stopStaff

Los pentagramas @notation{Ossia} se pueden preparar mediante la
creación de un pentagrama simultáneo nuevo en la posición adecuada:

@lilypond[verbatim,quote]
\new Staff \relative c'' {
  c4 b d c
  <<
    { c4 b d c }
    \new Staff { e4 d f e }
  >>
  c4 b c2
}
@end lilypond

@noindent
Sin embargo, el ejemplo anterior no es lo que normalmente se desea.
Para crear pentagramas de ossia que estén encima del pentagrama
original, que no tengan compás ni clave, y que tengan un tamaño menor
de tipografía se deben usar varios trucos.  El Manual de aprendizaje
describe una técnica específica para llegar a este objetivo, empezando
por @rlearning{Anidado de expresiones musicales}.

El ejemplo siguiente utiliza la propiedad @code{alignAboveContext}
para alinear el pentagrama de ossia.  Este método es muy conveniente
cuando se necesitan sólo algunos pentagramas de ossia.

@lilypond[verbatim,quote]
\new Staff = "main" \relative c'' {
  c4 b d c
  <<
    { c4 b d c }

    \new Staff \with {
      \remove "Time_signature_engraver"
      alignAboveContext = #"main"
      fontSize = #-3
      \override StaffSymbol.staff-space = #(magstep -3)
      \override StaffSymbol.thickness = #(magstep -3)
      firstClef = ##f
    }
    { e4 d f e }
  >>
  c4 b c2
}
@end lilypond

Si se requieren muchos pentagramas de ossia aislados, puede ser más
conveniente la creación de un contexto @code{Staff} vacío con un
@emph{identificador de contexto} específico; después se pueden crear
los pentagramas de ossia @emph{llamando} a este contexto y usando
@code{\startStaff} y @code{\stopStaff} en los puntos deseados.  Las
ventajas de este método son más patentes si la pieza es más larga que
en ejemplo siguiente.

@lilypond[verbatim,quote,ragged-right]
<<
  \new Staff = "ossia" \with {
    \remove "Time_signature_engraver"
    \hide Clef
    fontSize = #-3
    \override StaffSymbol.staff-space = #(magstep -3)
    \override StaffSymbol.thickness = #(magstep -3)
  }
  { \stopStaff s1*6 }

  \new Staff \relative c' {
    c4 b c2
    <<
      { e4 f e2 }
      \context Staff = "ossia" {
        \startStaff e4 g8 f e2 \stopStaff
      }
    >>
    g4 a g2 \break
    c4 b c2
    <<
      { g4 a g2 }
      \context Staff = "ossia" {
        \startStaff g4 e8 f g2 \stopStaff
      }
    >>
    e4 d c2
  }
>>
@end lilypond

Como alternativa, se puede usar la instrucción
@code{\RemoveEmptyStaves} para crear pentagramas de ossia.  Este
método es muy conveniente cuando los pentagramas de ossia aparecen
inmediatamente después de un salto de línea. Para ver más información
sobre @code{\RemoveEmptyStaves}, consulte @ref{Ocultar pentagramas}.

@lilypond[verbatim,quote,ragged-right]
<<
  \new Staff = "ossia" \with {
    \remove "Time_signature_engraver"
    \hide Clef
    fontSize = #-3
    \override StaffSymbol.staff-space = #(magstep -3)
    \override StaffSymbol.thickness = #(magstep -3)
  } \relative c'' {
    R1*3
    c4 e8 d c2
  }
  \new Staff \relative c' {
    c4 b c2
    e4 f e2
    g4 a g2 \break
    c4 b c2
    g4 a g2
    e4 d c2
  }
>>

\layout {
  \context {
    \Staff \RemoveEmptyStaves
    \override VerticalAxisGroup.remove-first = ##t
  }
}
@end lilypond


@snippets

@lilypondfile[verbatim,quote,texidoc,doctitle]
{vertically-aligning-ossias-and-lyrics.ly}

@seealso
Glosario musical:
@rglos{ossia},
@rglos{staff},
@rglos{Frenched staff}.

Manual de aprendizaje:
@rlearning{Anidado de expresiones musicales},
@rlearning{Tamaño de los objetos},
@rlearning{Longitud y grosor de los objetos}.

Referencia de la notación:
@ref{Ocultar pentagramas}.

Fragmentos de código:
@rlsr{Staff notation}.

Referencia de funcionamiento interno:
@rinternals{StaffSymbol}.


@node Ocultar pentagramas
@unnumberedsubsubsec Ocultar pentagramas
@translationof Hiding staves

@cindex francesa, partituras a la
@cindex ocultación de pentagramas
@cindex francesa, pentagrama a la
@cindex pentagrama, ocultación de
@cindex pentagrama vacío
@cindex ocultar pentagramas
@cindex vacío, pentagrama

@funindex \RemoveEmptyStaves
@funindex RemoveEmptyStaves
@funindex Staff_symbol_engraver
@funindex \stopStaff
@funindex stopStaff

Se pueden ocultar las líneas del pentagrama quitando el grabador
@code{Staff_symbol_engraver} del contexto de @code{Staff}.  Como
alternativa se puede utilizar la instrucción @code{\stopStaff}.

@lilypond[verbatim,quote]
\new Staff \with {
  \remove "Staff_symbol_engraver"
}
\relative c''' { a8 f e16 d c b a2 }
@end lilypond

Se pueden ocultar los pentagramas que están vacíos mediante la
instrucción @code{\RemoveEmptyStaves} dentro del bloque @code{\layout}
para el contexto @code{\Staff}.  En las partituras orquestales, este
estilo se conoce como @q{partitura a la francesa}.  De forma
predeterminada, esta instrucción oculta y elimina todos los
pentagramas vacíos de la partitura excepto los del primer sistema.

@warning{Un pentagrama se considera vacío cuando contiene solamente
silencios, silencios multicompás, desplazamientos, silencios de
separación o una combinación de estos elementos.}

@lilypond[verbatim,quote,ragged-right]
\layout {
  \context {
    \Staff \RemoveEmptyStaves
  }
}

\relative c' <<
  \new Staff {
    e4 f g a \break
    b1 \break
    a4 b c2
  }
  \new Staff {
    c,4 d e f \break
    R1 \break
    f4 g c,2
  }
>>
@end lilypond

@cindex ossia

@noindent
También se puede usar @code{\RemoveEmptyStaves} en el contexto
@code{\Staff} para crear secciones de ossia para un pentagrama.  Para
ver más detalles, consulte @ref{Pentagramas de Ossia}.

@cindex ocultar pentagramas de música antigua
@cindex ocultar pentagramas rítmicos

@funindex \RemoveEmptyStaves
@funindex RemoveEmptyStaves

Se puede usar la instrucción @code{\RemoveEmptyStaves} para ocultar
los pentagramas vacíos en contextos de música antigua como
@code{\VaticanaStaff}.  De forma similar, se puede usar
@code{\RhythmicStaff \RemoveEmptyStaves} para ocultar los contextos
@code{RhythmicStaff} vacíos.


@predefined
@code{\Staff \RemoveEmptyStaves},
@code{\VaticanaStaff \RemoveEmptyStaves},
@code{\RhythmicStaff \RemoveEmptyStaves}.
@endpredefined


@snippets
@lilypondfile[verbatim,quote,texidoc,doctitle]
{removing-the-first-empty-line.ly}

@seealso
Glosario musical:
@rglos{Frenched staff}.

Manual de aprendizaje:
@rlearning{Visibilidad y color de los objetos}.

Referencia de la notación:
@ref{Cambiar los valores por omisión de los contextos},
@ref{El símbolo del pentagrama},
@ref{Pentagramas de Ossia},
@ref{Notas ocultas},
@ref{Silencios invisibles},
@ref{Visibilidad de los objetos}.

Fragmentos de código:
@rlsr{Staff notation}.

Referencia de funcionamiento interno:
@rinternals{ChordNames},
@rinternals{FiguredBass},
@rinternals{Lyrics},
@rinternals{Staff},
@rinternals{VerticalAxisGroup},
@rinternals{Staff_symbol_engraver}.

@knownissues
La eliminación del grabador @code{Staff_symbol_engraver} también
oculta las barras de compás.  Si se fuerza la visibilidad de la barra
de compás, pueden ocurrir errores de formato visual.  En este caso,
utilice las siguientes sobreescrituras de valores en vez de quitar el
grabador:

@example
\omit StaffSymbol
\override NoteHead.no-ledgers = ##t
@end example

Para ver los fallos y problemas conocidos, así como las advertencias
asociadas con @code{\RemoveEmptyStaves}, consulte
@ref{Cambiar los valores por omisión de los contextos}.


@node Escritura de las particellas
@subsection Escritura de las particellas
@translationof Writing parts

Esta sección explica cómo insertar indicaciones de tempo y nombres de
instrumento en una partitura.  También se describen métodos para citar
otras voces y dar formato a las notas guía.

@menu
* Nombres de instrumentos::
* Citar otras voces::
* Formateo de las notas guía::
@end menu


@node Nombres de instrumentos
@unnumberedsubsubsec Nombres de instrumentos
@translationof Instrument names

@cindex instrumento, nombre del
@cindex instrumento, nombre abreviado

Se pueden imprimir los nombres de los instrumentos en el lado
izquierdo de los pentagramas dentro de los contextos
@code{Staff}, @code{PianoStaff}, @code{StaffGroup}, @code{GrandStaff}
y @code{ChoirStaff}.  El valor de @code{instrumentName} se usa para el
primer pentagrama, y el valor de @code{shortInstrumentName} se usa
para todos los pentagramas siguientes.

@lilypond[verbatim,quote,ragged-right,relative=1]
\new Staff \with {
  instrumentName = #"Violin "
  shortInstrumentName = #"Vln. "
}
{ c4.. g'16 c4.. g'16 \break | c1 }
@end lilypond

@cindex instrumentos, nombres complejos de

También podemos usar @code{\markup} para construir nombres de
instrumento más complicados:

@lilypond[verbatim,quote,relative=2]
\new Staff \with {
  instrumentName = \markup {
    \column { "Clarinetti"
      \line { "in B" \smaller \flat }
    }
  }
}
{ c4 c,16 d e f g2 }
@end lilypond

@cindex instrument names, centering

Cuando se agrupan dos o más contextos de pentagrama, los nombres de
instrumento y los nombres cortos aparecen centrados de forma
predeterminada.  Para centrar nombres de instrumento de varias líneas,
se debe utilizar @code{\center-column}:

@lilypond[verbatim,quote,indent=1.5\cm,relative=2]
<<
  \new Staff \with {
    instrumentName = #"Flute"
  }
  { f2 g4 f }
  \new Staff \with {
    instrumentName = \markup {
      \center-column { "Clarinet" }
      \line { "in B" \smaller \flat }
    }
  }
  { c4 b c2 }
>>
@end lilypond

@funindex indent
@funindex short-indent

Sin embargo, si los nombres de instrumento son más largos, éstos no se
centran para un grupo de pentagramas a no ser que se aumenten los
valores del sangrado, @code{indent}, y del sangrado corto,
@code{short-indent}.  Para ver más detalles sobre estos ajustes,
consulte @ref{Variables de paper para desplazamientos y sangrados,,Variables de @code{@bs{}paper} para desplazamientos y sangrados}.

@lilypond[verbatim,quote,ragged-right]
\relative c'' {
  <<
    \new Staff \with {
      instrumentName = #"Alto Flute in G"
      shortInstrumentName = #"Flt."
    }
    {
      f2 g4 f \break
      g4 f g2
    }
    \new Staff \with {
      instrumentName = #"Clarinet"
      shortInstrumentName = #"Clar."
    }
    {
      c,4 b c2 \break
      c2 b4 c
    }
  >>
}

\layout {
  indent = 3.0\cm
  short-indent = 1.5\cm
}
@end lilypond

@cindex nombres de instrumento, añadir a otros contextos

Para añadir nombres de instrumento a otros contextos (como
@code{ChordNames} o @code{FiguredBass}), debemos
añadir el grabador @code{Instrument_name_engraver} a dicho
contexto. Para ver más detalles, consulte @ref{Modificar los complementos (plug-ins) de contexto}.

@cindex nombres de instrumento, cambiar

El nombre de instrumento corto @code{shortInstrumentName} se puede
cambiar en mitad de una pieza; sin embargo, sólo el primer
@code{instrumentName} se imprime y el resto de ellos se ignoran:

@lilypond[verbatim,quote,ragged-right,relative=1]
\new Staff \with {
  instrumentName = #"Flute"
  shortInstrumentName = #"Flt."
}
{
  c1 c c c \break
  c1 c c c \break
  \set Staff.instrumentName = #"Clarinet"
  \set Staff.shortInstrumentName = #"Clt."
  c1 c c c \break
  c1 c c c \break
}
@end lilypond

@cindex instrumento, cambio de
@cindex cambio de instrumento

@funindex \addInstrumentDefinition
@funindex addInstrumentDefinition
@funindex \instrumentSwitch
@funindex instrumentSwitch

Si se necesita un @emph{cambio} de instrumento, se debe usar
@code{\addInstrumentDefinition} en combinación con
@code{\instrumentSwitch} para crear una lista detallada de los cambios
necesarios para el intercambio.  La instrucción
@code{\addInstrumentDefinition} tiene dos argumentos: una cadena
identificativa, y una lista asociativa de propiedades de contexto y
los valores que el instrumento va a usar.  Se debe situar en el ámbito
del nivel más alto.  @code{\instrumentSwitch} se usa en la expresión
musical para declarar el cambio de instrumento:

@lilypond[verbatim,quote,ragged-right]
\addInstrumentDefinition #"contrabassoon"
  #`((instrumentTransposition . ,(ly:make-pitch -1 0 0))
     (shortInstrumentName . "Cbsn.")
     (clefGlyph . "clefs.F")
     (middleCPosition . 6)
     (clefPosition . 2)
     (instrumentCueName . ,(make-bold-markup "cbsn."))
     (midiInstrument . "bassoon"))

\new Staff \with {
  instrumentName = #"Bassoon"
}
\relative c' {
  \clef tenor
  \compressFullBarRests
  c2 g'
  R1*16
  \instrumentSwitch "contrabassoon"
  c,,2 g \break
  c,1 ~ | 1
}
@end lilypond

@seealso
Referencia de la notación:
@ref{Variables de paper para desplazamientos y sangrados,,Variables de @code{@bs{}paper} para desplazamientos y sangrados},
@ref{Modificar los complementos (plug-ins) de contexto}.

Fragmentos de código:
@rlsr{Staff notation}.

Referencia de funcionamiento interno:
@rinternals{InstrumentName},
@rinternals{PianoStaff},
@rinternals{Staff}.


@node Citar otras voces
@unnumberedsubsubsec Citar otras voces
@translationof Quoting other voices

@cindex guía, voces
@cindex citar otras voces
@cindex fragmentos, citar
@cindex notas guía

@funindex \addQuote
@funindex addQuote
@funindex \quoteDuring
@funindex quoteDuring
@funindex \transposition
@funindex transposition

Es muy frecuente que una voz use las mismas notas que otra voz.  Por
ejemplo, los violines primero y segundo tocando la misma frase durante
un determinado pasaje musical.  Esto se hace dejando que una voz
@emph{cite} a la otra, sin tener que volver a introducir la música
para la segunda voz.

La instrucción @code{\addQuote}, utilizada en el ámbito del nivel
sintáctico superior, define un flujo de música desde el que es posible
citar fragmentos.

La instrucción @code{\quoteDuring} se usa para indicar el punto en que
comienza la cita.  Va seguida por dos argumentos: el nombre de la voz
citada, tal y como se definió con @code{\addQuote}, y una expresión
musical que indica la duración de la cita.

@lilypond[verbatim,quote]
fluteNotes = \relative c'' {
  a4 gis g gis | b4^"quoted" r8 ais\p a4( f)
}

oboeNotes = \relative c'' {
  c4 cis c b \quoteDuring #"flute" { s1 }
}

\addQuote "flute" { \fluteNotes }

\score {
  <<
    \new Staff \with { instrumentName = "Flute" } \fluteNotes
    \new Staff \with { instrumentName = "Oboe" } \oboeNotes
  >>
}
@end lilypond

Si la expresión musical que se usa para @code{\quoteDuring} contiene
cualquier cosa que no sea un silencio de separación o un silencio
multicompás, se produce una situación de polifonía, lo que no suele
ser deseable:

@lilypond[verbatim,quote]
fluteNotes = \relative c'' {
  a4 gis g gis | b4^"quoted" r8 ais\p a4( f)
}

oboeNotes = \relative c'' {
  c4 cis c b \quoteDuring #"flute" { e4 r8 ais b4 a }
}

\addQuote "flute" { \fluteNotes }

\score {
  <<
    \new Staff \with { instrumentName = "Flute" } \fluteNotes
    \new Staff \with { instrumentName = "Oboe" } \oboeNotes
  >>
}
@end lilypond

La instrucción @code{\quoteDuring} usa los ajustes de
@code{\transposition} tanto de la parte citada como de la que cita,
para producir notas que tienen la misma altura de sonido en la parte
que cita y en las de la parte citada.

@lilypond[verbatim,quote]
clarinetNotes = \relative c'' {
  \transposition bes
  \key d \major
  b4 ais a ais | cis4^"quoted" r8 bis\p b4( f)
}

oboeNotes = \relative c'' {
  c4 cis c b \quoteDuring #"clarinet" { s1 }
}

\addQuote "clarinet" { \clarinetNotes }


\score {
  <<
    \new Staff \with { instrumentName = "Clarinet" } \clarinetNotes
    \new Staff \with { instrumentName = "Oboe" } \oboeNotes
  >>
}
@end lilypond

@cindex note-event
@cindex articulation-event
@cindex dynamic-event
@cindex rest-event
@cindex slur-event
@cindex crescendo-event

@funindex quotedEventTypes
@funindex quotedCueEventTypes

De forma predeterminada, la música citada incluye todas las
articulaciones, matices dinámicos, elementos de marcado, etc. de la
expresión citada.  Es posible elegir cuáles de estos objetos de la
música que se cita se imprimen, mediante la propiedad de contexto
@code{quotedEventTypes}.

@lilypond[verbatim,quote]
fluteNotes = \relative c'' {
  a2 g2 |
  b4\<^"quoted" r8 ais a4\f( c->)
 }

oboeNotes = \relative c'' {
  c2. b4 |
  \quoteDuring #"flute" { s1 }
}

\addQuote "flute" { \fluteNotes }

\score {
  <<
    \set Score.quotedEventTypes = #'(note-event articulation-event
                                     crescendo-event rest-event
                                     slur-event dynamic-event)
    \new Staff \with { instrumentName = "Flute" } \fluteNotes
    \new Staff \with { instrumentName = "Oboe" } \oboeNotes
  >>
 }
@end lilypond

Las citas también se pueden etiquetar, véase @ref{Uso de etiquetas}.

@seealso
Referencia de la notación:
@ref{Transposición de los instrumentos},
@ref{Uso de etiquetas}.

Archivos de inicio:
@file{scm/define-event-classes.scm}.

Fragmentos de código:
@rlsr{Staff notation}.

Referencia de funcionamiento interno:
@rinternals{Music classes},
@rinternals{QuoteMusic},
@rinternals{Voice}.

@knownissues
Sólo el contenido de la primera voz de una instrucción
@code{\addQuote} se tiene en cuenta para la cita, de manera que
si la expresión musical contiene enunciados @code{\new}
o @code{\context Voice}, sus contenidos no serían citados.
La cita de notas de adorno no está contemplada y puede hacer que
LilyPond termine de forma abrupta; la cita de unos tresillos
dentro de otros puede dar como resultado una
notación de pobre calidad.


@node Formateo de las notas guía
@unnumberedsubsubsec Formateo de las notas guía
@translationof Formatting cue notes

@cindex guía, formateo de las notas
@cindex notas guía
@cindex guía, notas
@cindex guía, notas, formato de
@cindex fragmentos
@cindex citar otras voces
@cindex voces, citar


@funindex \cueDuring
@funindex cueDuring
@funindex \cueClef
@funindex cueClef
@funindex \cueDuringWithClef
@funindex cueDuringWithClef
@funindex \quoteDuring
@funindex quoteDuring

@cindex notas pequeñas
@cindex pequeñas, notas
@cindex CueVoice

La manera más sencilla de dar formato a las notas guía es crear
explícitamente un contexto @code{CueVoice} dentro de la parte.

@lilypond[verbatim,relative=1]
R1
<<
  { e2\rest r4. e8 }
  \new CueVoice {
    \stemUp d'8^"flute" c d e fis2
  }
>>
d,4 r a r
@end lilypond

La instrucción @code{\cueClef} puede usarse también con un contexto
@code{CueVoice} explícito si se requiere un cambio de clave, e imprime
una clave del tamaño adecuado para las notas guía.  Después puede
utilizarse la instrucción @code{\cueClefUnset} para volver a la clave
original, de nuevo con un signo de clave del tamaño adecuado.

@lilypond[verbatim,noragged-right,relative=1]
\clef "bass"
R1
<<
  { e2\rest r4. \cueClefUnset e,8 }
  \new CueVoice {
    \cueClef "treble" \stemUp d''8^"flute" c d e fis2
  }
>>
d,,4 r a r
@end lilypond

Las instrucciones @code{\cueClef} y @code{\cueClefUnset} se pueden
usar también sin un @code{CueVoice} si es necesario.

@lilypond[verbatim,noragged-right,relative=1]
\clef "bass"
R1
\cueClef "treble"
d'8^"flute" c d e fis2
\cueClefUnset
d,,4 r a r
@end lilypond

En casos de colocación más compleja de notas guía, por ejemplo con
transposición o insertando notas guía procedentes de más de una
fuente, pueden usarse las instrucciones @code{\cueDuring} o
@code{\cueDuringWithClef}.  Son una forma más especializada de
@code{\quoteDuring}, véase @ref{Citar otras voces} en la sección
anterior.

La sintaxis es:

@example
\cueDuring #@var{nombre_de_la_cita} #@var{dirección} #@var{música}
@end example

y

@example
\cueDuringWithClef #@var{nombre_de_la_cita} #@var{dirección} #@var{clave} #@var{música}
@end example

La música procedente de los compases correspondientes del elemento
@code{@var{nombre_de_la_cita}} se añade como un contexto
@code{CueVoice} y ocurre simultáneamente con la @code{@var{música}},
lo que produce una situación polifónica.  La @code{@var{dirección}}
toma un argumento @code{UP} (arriba) o @code{DOWN} (abajo), y
corresponde a las voces primera y segunda, respectivamente,
determinando cómo se imprimen las notas guía en relación a la otra
voz.

@lilypond[verbatim,quote]
fluteNotes = \relative c'' {
  r2. c4 | d8 c d e fis2 | g2 d |
}

oboeNotes = \relative c'' {
  R1
  \new CueVoice { \set instrumentCueName = "flute" }
  \cueDuring #"flute" #UP { R1 }
  g2 c,
}

\addQuote "flute" { \fluteNotes }

\new Staff {
  \oboeNotes
}
@end lilypond

@noindent


Es posible ajustar qué aspectos de la música se citan con
@code{\cueDuring} estableciendo el valor de la propiedad
@code{quotedCueEventTypes}.  Su valor por omisión es
@code{'(note-event rest-event tie-event beam-event
tuplet-span-event)}, lo que significa que solamente las notas,
silencios, ligaduras de unión, barras y grupos especiales se citan,
pero no las articulaciones, marcas dinámicas, elementos de marcado,
etc.

@warning{Cuando un contexto @code{Voice} da comienzo con @code{\cueDuring},
como en el ejemplo siguiente, el contexto @code{Voice} se debe
declarar explícitamente, pues en caso contrario toda la expresión musical
pertenecería al contexto @code{CueVoice}.}

@lilypond[verbatim,quote]
oboeNotes = \relative c'' {
  r2 r8 d16(\f f e g f a)
  g8 g16 g g2.
}
\addQuote "oboe" { \oboeNotes }

\new Voice \relative c'' {
  \set Score.quotedCueEventTypes = #'(note-event rest-event tie-event
                                      beam-event tuplet-span-event
                                      dynamic-event slur-event)
  \cueDuring #"oboe" #UP { R1 }
  g2 c,
}
@end lilypond

El nombre del instrumento que está tocando se puede imprimir si se
ajusta la propiedad @code{instrumentCueName} dentro de un contexto
@code{CueVoice} provisional.  La colocación y estilo del
@code{instrumentCueName} viene controlado a través del objeto
@code{\instrumentSwitch}, véase @ref{Nombres de instrumentos}. Si las
notas guía requieren un cambio de clave, puede hacerse manualmente
pero la clave original se debe restaurar al final de las notas guía.

@lilypond[verbatim,quote]
fluteNotes = \relative c'' {
  r2. c4 d8 c d e fis2 g2 d2
}

bassoonNotes = \relative c {
  \clef bass
  R1
  \clef treble
  \new CueVoice { \set instrumentCueName = "flute" }
  \cueDuring #"flute" #UP { R1 }
  \clef bass
  g4. b8 d2
}

\addQuote "flute" { \fluteNotes }

\new Staff {
  \bassoonNotes
}
@end lilypond

De forma alternativa, puede usarse la función
@code{\cueDuringWithClef} en su lugar.  Esta instrucción admite un
argumento adicional para especificar el cambio de clabe que se
necesita imprimir para las notas guía, pero después imprime
automáticamente la clave original una vez que ha finalizado la serie
de notas guía.

@lilypond[verbatim,quote]
fluteNotes = \relative c'' {
  r2. c4 d8 c d e fis2 g2 d2
}

bassoonNotes = \relative c {
  \clef bass
  R1
  \new CueVoice { \set instrumentCueName = "flute" }
  \cueDuringWithClef #"flute" #UP #"treble" { R1 }
  g4. b8 d2
}

\addQuote "flute" { \fluteNotes }

\new Staff {
  \bassoonNotes
}
@end lilypond

@funindex \transposedCueDuring
@funindex transposedCueDuring

Como @code{\quoteDuring}, @code{\cueDuring} tiene en cuenta las
transposiciones instrumentales.  Las notas guía se producen en las
alturas en que se escribirían para el instrumento que recibe la cita,
para así producir las alturas de sonido del instrumento original.

Para transportar las notas guía de forma diferente, use
@code{\transposedCueDuring}.  Esta instrucción acepta un argumento
adicional para especificar (en modo absoluto) la altura impresa con
que queremos representar el sonido de un Do central de concierto.
Esto es útil para toma citas de un instrumento que está en un registro
completamente diferente.

@lilypond[verbatim,quote]
piccoloNotes = \relative c''' {
  \clef "treble^8"
  R1
  c8 c c e g2
  c4 g g2
}

bassClarinetNotes = \relative c' {
  \key d \major
  \transposition bes,
  d4 r a r
  \transposedCueDuring #"piccolo" #UP d { R1 }
  d4 r a r
}

\addQuote "piccolo" { \piccoloNotes }

<<
  \new Staff \piccoloNotes
  \new Staff \bassClarinetNotes
>>
@end lilypond

@cindex removing cue notes
@cindex cue notes, removing

@funindex \killCues
@funindex killCues
@funindex \addInstrumentDefinition
@funindex addInstrumentDefinition

La instrucción @code{\killCues} elimina las notas guía de una
expresión musical, de forma que la misma expresión musical pueda
utilizarse para producir la particella instrumental (con notas guía) y
la partitura de conjunto.  La instrucción @code{\killCues} elimina
solamente las notas y eventos que se han citado mediante
@code{\cueDuring}.  Otros elementos de marcado asociados con las
guías, como los cambios de clave o una etiqueta identificativa del
instrumento fuente, pueden marcarse para su inclusión selectiva dentro
de la partitura; véase @ref{Uso de etiquetas}.

@lilypond[verbatim,quote]
fluteNotes = \relative c'' {
  r2. c4 d8 c d e fis2 g2 d2
}

bassoonNotes = \relative c {
  \clef bass
  R1
  \tag #'part {
    \clef treble
    \new CueVoice { \set instrumentCueName = "flute" }
  }
  \cueDuring #"flute" #UP { R1 }
  \tag #'part \clef bass
  g4. b8 d2
}

\addQuote "flute" { \fluteNotes }

\new Staff {
  \bassoonNotes
}

\new StaffGroup <<
  \new Staff {
    \fluteNotes
  }
  \new Staff {
    \removeWithTag #'part { \killCues { \bassoonNotes } }
  }
>>
@end lilypond

Como alternativa, los cambios de clave y los letreros de instrumento
se pueden recolectar dentro de una definición de instrumento para su
uso repetido, utilizando @code{\addInstrumentDefinition} que se
descibe en @ref{Nombres de instrumentos}.

@seealso
Referencia de la notación:
@ref{Citar otras voces},
@ref{Transposición de los instrumentos},
@ref{Nombres de instrumentos},
@ref{Clave},
@ref{Guías musicales},
@ref{Uso de etiquetas}.

Fragmentos de código:
@rlsr{Staff notation}.

Referencia de funcionamiento interno:
@rinternals{CueVoice},
@rinternals{Voice}.

@knownissues
Pueden ocurrir colisiones con los silencios si se usa
@code{\cueDuring}, entre los contextos de @code{Voice} y de
@code{CueVoice}.  Al usar @code{\cueDuringWithClef} o
@code{\transposedCueDuring} el argumento adicional requerido para cada
caso debe ir después de la cita y de la dirección.
